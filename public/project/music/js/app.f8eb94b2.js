(function(t){function e(e){for(var n,r,o=e[0],h=e[1],l=e[2],u=0,d=[];u<o.length;u++)r=o[u],a[r]&&d.push(a[r][0]),a[r]=0;for(n in h)Object.prototype.hasOwnProperty.call(h,n)&&(t[n]=h[n]);c&&c(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,o=1;o<i.length;o++){var h=i[o];0!==a[h]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},a={app:0},s=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/project/music/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=h;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var n=i("64a9"),a=i.n(n);a.a},"0aef":function(t,e,i){t.exports=i.p+"img/icon-arrow-down.d8e82491.svg"},"132d":function(t,e,i){"use strict";var n=i("76d5"),a=i.n(n);a.a},"495c":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:t.appStyle,attrs:{id:"app"}},[i("music",{attrs:{msg:"Welcome to Steve911's player"},on:{postImg:t.changeImage}})],1)},s=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"music",staticClass:"music"},[i("div",{class:["songList",t.showList?"songList-active":""]},[t._l(t.songList,function(e){return i("div",{key:e._id,staticClass:"songList-item",style:{background:e._id==t.setID?"linear-gradient(180deg, #7bc199, #27663317)":""}},[i("div",{class:["song-item-row","song-primary",t.currentSong._id==e._id?"song-in-player":""]},[i("span",{class:["song-play-btn",t.currentSong._id==e._id&&t.resume?"onplay":"pause"],on:{click:function(i){return t.handlePlay(e)}}},[i("svg",{staticClass:"play-svg",attrs:{t:"1570094903377",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"22628",width:"200",height:"200"}},[i("path",{staticClass:"pause-path",attrs:{d:"M513.024 61.44q93.184 0 175.104 35.328t142.848 96.768 96.256 143.872 35.328 175.616-35.328 175.616-96.256 143.872-142.848 96.768-175.104 35.328-175.104-35.328-142.848-96.768-96.256-143.872-35.328-175.616 35.328-175.616 96.256-143.872 142.848-96.768 175.104-35.328zM690.176 556.032q10.24-10.24 15.872-26.624t5.632-33.792-6.144-33.792-18.432-25.6q-48.128-35.84-103.936-83.456t-120.32-89.6q-14.336-9.216-28.16-8.704t-25.088 8.192-17.92 22.528-6.656 35.328l0 386.048q0 23.552 8.704 36.864t22.016 17.92 28.16 2.048 26.112-11.776q25.6-19.456 53.76-44.032t56.832-50.176 56.32-51.712 53.248-49.664z",fill:"black","p-id":"22629"}}),i("path",{staticClass:"playing-path",attrs:{d:"M512.000909-0.034088C229.207833-0.034088-0.033179 229.206924-0.033179 512c0 282.827164 229.2751 512.034088 512.034088 512.034088 282.827164 0 512.034088-229.241012 512.034088-512.034088C1024.034997 229.206924 794.828073-0.034088 512.000909-0.034088z m-100.763782 714.959254c0 30.883622-20.554993 56.108655-45.677763 56.108656h-22.838881c-25.12277 0-45.677763-25.225033-45.677763-56.108656V309.074834c0-30.849534 20.554993-56.108655 45.677763-56.108656h22.838881c25.12277 0 45.677763 25.259121 45.677763 56.108656v405.850332z m315.756059 0c0 30.883622-20.589081 56.108655-45.677763 56.108656h-22.838881c-25.156858 0-45.745939-25.225033-45.745939-56.108656V309.074834c0-30.849534 20.589081-56.108655 45.745939-56.108656h22.838881c25.088682 0 45.677763 25.259121 45.677763 56.108656v405.850332z",fill:"","p-id":"12815"}})])]),i("span",{staticClass:"song-name"},[t._v(t._s(e.name))]),i("span",{staticClass:"song-set-btn",on:{click:function(i){t.setID=t.setID==e._id?"":e._id}}},[i("svg",{staticClass:"icon",attrs:{t:"1570096405983",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7917",width:"200",height:"200"}},[i("path",{attrs:{d:"M1014.44204763 510.56975763c0-277.40996943-224.89055434-502.30052378-502.35086189-502.30052378-277.40731952 0-502.30184809 224.89055434-502.30184809 502.30052378 0 277.46163316 224.89452858 502.34953758 502.30184809 502.34953759C789.55149328 1012.91929521 1014.44204763 788.03139079 1014.44204763 510.56975763zM424.71470304 219.66762747c0-48.28432019 39.15575023-87.42814643 87.42814643-87.42814642 48.21940945 0 87.37648399 39.14382753 87.37648399 87.42814642 0 48.24722778-39.15707454 87.40297801-87.37648399 87.40297801C463.86912766 307.07060419 424.71470304 267.91485525 424.71470304 219.66762747zM424.71470304 510.59625165c0-48.27239749 39.15575023-87.40297801 87.42814643-87.40297802 48.21940945 0 87.37648399 39.13058052 87.37648399 87.40297802 0 48.24722778-39.15707454 87.40297801-87.37648399 87.40297801C463.86912766 597.99790405 424.71470304 558.84347943 424.71470304 510.59625165zM424.71470304 801.4970575c0-48.21940945 39.15575023-87.376484 87.42814643-87.376484 48.21940945 0 87.37648399 39.15707453 87.37648399 87.376484 0 48.27107318-39.15707454 87.45464174-87.37648399 87.45464174C463.86912766 888.95169924 424.71470304 849.76945499 424.71470304 801.4970575z","p-id":"7918",fill:"#2c2c2c"}})])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e._id==t.setID,expression:"song._id==setID"}],staticClass:"song-item-row song-set"},[i("span",{staticClass:"songImage"},[t._v(t._s(e.songImage))]),i("button",{class:["paper-btn","song-del-btn",t.loading?"disable":""],on:{click:function(i){return t.delSong(e._id)}}},[t._v("删除")]),i("button",{class:["paper-btn","song-del-btn",t.loading?"disable":""],on:{click:function(i){return t.handleEdit(e)}}},[t._v("编辑")])])])}),i("div",{staticClass:"btn-close-list",on:{click:function(e){t.showList=!1}}},[i("span",[t._v(">")]),i("span",[t._v(">")]),i("span",[t._v(">")])]),i("div",{staticClass:"btn-add"},[i("button",{class:["paper-btn"]},[i("label",{attrs:{for:"local-play"}},[t._v("\n          本地播放\n          "),i("input",{attrs:{type:"file",id:"local-play"},on:{change:t.localPlay}})])]),i("button",{class:["paper-btn"],on:{click:function(e){t.showUpload=!0}}},[t._v("在线添加")])]),i("div",{class:["edit-form",t.showEdit?"edit-form-active":""]},[i("div",{staticClass:"btn-edit-close",on:{click:function(e){t.showEdit=!1}}},[t._v("X")]),i("div",{staticClass:"edit-form-controls"},[i("label",{attrs:{for:"songName"}},[t._v("\n          歌曲名\n          "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.onEditSong.name,expression:"onEditSong.name"}],attrs:{id:"songName",type:"text"},domProps:{value:t.onEditSong.name},on:{input:function(e){e.target.composing||t.$set(t.onEditSong,"name",e.target.value)}}})]),i("label",{attrs:{for:"songCover"}},[t._v("\n          背景图\n          "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.onEditSong.songImage,expression:"onEditSong.songImage"}],attrs:{id:"songCover",type:"text",placeholder:"为该歌曲添加图片地址吧"},domProps:{value:t.onEditSong.songImage},on:{input:function(e){e.target.composing||t.$set(t.onEditSong,"songImage",e.target.value)}}}),i("span",{staticClass:"btn-image-preview",attrs:{"aria-label":"预览背景",title:"预览背景"},on:{click:function(e){return e.preventDefault(),t.handlePreview(e)}}},[i("svg",{staticClass:"icon-preview",attrs:{t:"1570617460355",viewBox:"0 0 1422 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4532",width:"200",height:"200"}},[i("path",{attrs:{d:"M14.747612 0m63.158941 0l1263.1788 0q63.15894 0 63.15894 63.15894l0 0q0 63.15894-63.15894 63.15894l-1263.1788 0q-63.15894 0-63.158941-63.15894l0 0q0-63.15894 63.158941-63.15894Z",fill:"#ffffff","p-id":"4533"}}),i("path",{attrs:{d:"M235.803903 126.31788v473.69205h947.3841V126.31788H235.803903zM109.486023 0h1200.01986v631.5894a94.73841 94.73841 0 0 1-94.73841 94.73841H204.224433a94.73841 94.73841 0 0 1-94.73841-94.73841V0z",fill:"#ffffff","p-id":"4534"}}),i("path",{attrs:{d:"M330.542313 221.05629m63.15894 0l631.5894 0q63.15894 0 63.15894 63.15894l0 0q0 63.15894-63.15894 63.15894l-631.5894 0q-63.15894 0-63.15894-63.15894l0 0q0-63.15894 63.15894-63.15894Z",fill:"#ffffff","p-id":"4535"}}),i("path",{attrs:{d:"M646.337013 947.3841m0-63.15894l0-221.05629q0-63.15894 63.15894-63.15894l0 0q63.15894 0 63.15894 63.15894l0 221.05629q0 63.15894-63.15894 63.15894l0 0q-63.15894 0-63.15894-63.15894Z",fill:"#ffffff","p-id":"4536"}}),i("path",{attrs:{d:"M1088.449593 1010.54304m-63.15894 0l-631.5894 0q-63.15894 0-63.15894-63.15894l0 0q0-63.15894 63.15894-63.15894l631.5894 0q63.15894 0 63.15894 63.15894l0 0q0 63.15894-63.15894 63.15894Z",fill:"#ffffff","p-id":"4537"}})])])]),i("button",{class:["paper-btn",t.loading?"disable":""],on:{click:t.editSong}},[t._v("确认编辑")])])]),i("div",{class:["upload-form",t.showUpload?"upload-form-active":""]},[i("div",{staticClass:"btn-upload-close",on:{click:function(e){t.showUpload=!1}}},[t._v("X")]),i("div",{staticClass:"upload-form-controls"},[i("label",{attrs:{for:"musicFile"}},[i("div",{staticClass:"upload-btn paper-btn"},[t._v(".")]),i("input",{ref:"ulDom",attrs:{type:"file",id:"musicFile"},on:{change:t.selectSong}})]),i("div",{staticClass:"upload-info"},[i("span",{staticClass:"file-name",domProps:{textContent:t._s(t.songFile.name)}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.songImage,expression:"songImage"}],attrs:{type:"text",placeholder:"为该歌曲添加图片地址吧"},domProps:{value:t.songImage},on:{input:function(e){e.target.composing||(t.songImage=e.target.value)}}})]),i("button",{class:["paper-btn",t.loading?"disable":""],on:{click:t.uploadSong}},[t._v(t._s(t.loading?"上传中":"确认上传"))])])])],2),i("HandDrawPlayer",{ref:"player",attrs:{resume:t.resume,songLoading:t.songLoading,song:t.currentSong},on:{"update:resume":function(e){t.resume=e},"update:songLoading":function(e){t.songLoading=e},"update:song-loading":function(e){t.songLoading=e},"song-ended":t.autoChange},scopedSlots:t._u([{key:"listButton",fn:function(){return[i("button",{class:["btn-list",t.showList?"btn-list-active":""],on:{click:function(){return t.showList=!t.showList}}},[t._v("MyList")])]},proxy:!0},{key:"state",fn:function(){return[i("transition-group",{staticClass:"action-state",staticStyle:{"font-size":".8rem"},attrs:{name:"action-state",tag:"div",mode:"out-in"}},[i("canvas",{directives:[{name:"show",rawName:"v-show",value:t.songLoading,expression:"songLoading"}],key:"songLoading",attrs:{id:"song-load"}}),t.loading?i("div",{key:"loading",staticClass:"loading",staticStyle:{color:"green"}},[t._v("loading...")]):t._e()])]},proxy:!0}])})],1)},o=[],h=(i("8e6e"),i("ac6a"),i("456d"),i("6762"),i("2fdb"),i("bd86")),l=(i("7f7f"),i("20d6"),i("d225")),c=i("b0b4"),u=i("bc3a"),d=i.n(u);function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(i,!0).forEach(function(e){Object(h["a"])(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var g,v,y,m,b,x,w,M,k,_="api/music/",O={},P=window.localStorage.getItem("token"),S=function(){function t(){Object(l["a"])(this,t)}return Object(c["a"])(t,null,[{key:"getMusic",value:function(){return d.a.get(_,{"Content-Type":"application/json"}).then(function(t){return t.data.map(function(t){return f({},t)})})}},{key:"addMusic",value:function(t){return d.a.post(_,t,{"Content-Type":"application/json"})}},{key:"uploadMusic",value:function(t){return O["Authorization"]=P,O["Content-Type"]="multipart/form-data",d()({method:"post",url:"".concat(_,"upload"),data:t,headers:O})}},{key:"delMusic",value:function(t){return O["Authorization"]=P,d()({method:"delete",url:"".concat(_).concat(t),headers:O})}},{key:"updateMusic",value:function(t){return O["Authorization"]=P,O["content-type"]="application/json",d()({method:"PATCH",url:_,headers:O,data:JSON.stringify(t)})}}]),t}(),A=S,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"player"},[n("button",{class:["btn-play",t.resume?"btn-play-active":""],on:{click:t.startPlay}}),t._t("listButton"),t._t("state"),n("audio",{ref:"audio",attrs:{src:(t.song.songUrl.includes("base64")?"":"/")+t.song.songUrl},on:{timeupdate:t.onPlay,canplay:t.loadInfo,ended:t.autoChange}}),n("canvas",{attrs:{id:"canvas"}}),n("canvas",{attrs:{id:"canvas-shadow"}}),n("div",{staticClass:"songInfo"},[n("div",{staticClass:"songName"},[t._v(t._s(t.song.name))]),n("div",{staticClass:"time",style:{background:"linear-gradient(90deg, #619c71, transparent "+1.5*t.timePercent+"%) "}},[t._v(t._s(t.currentTime)+"/"+t._s(t.duration))])]),n("div",{ref:"guideLine",staticClass:"guide-line"},[n("span",{staticClass:"guide-text"},[t._v("press it !!")]),n("img",{staticClass:"icon",attrs:{src:i("0aef"),alt:""}})])],2)},I=[],C=(i("34ef"),i("a481"),i("5df3"),i("4f7f"),i("9278"),i("87f3"),i("308d")),T=i("6bb5"),R=i("4e2b"),L=(i("c5f6"),i("3b2b"),i("4917"),i("6c7b"),i("ac4d"),i("8a81"),i("7618")),j=function(){var t="undefined"!=typeof self,e=function(){function e(t,i){Object(l["a"])(this,e),this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1},this.config=t||{},this.surface=i,this.config.options&&(this.defaultOptions=this._options(this.config.options))}return Object(c["a"])(e,[{key:"_options",value:function(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}},{key:"_drawable",value:function(t,e,i){return{shape:t,sets:e||[],options:i||this.defaultOptions}}},{key:"getCanvasSize",value:function(){var t=function(t){return t&&"object"==Object(L["a"])(t)&&t.baseVal&&t.baseVal.value?t.baseVal.value:t||100};return this.surface?[t(this.surface.width),t(this.surface.height)]:[100,100]}},{key:"computePolygonSize",value:function(t){if(t.length){for(var e=t[0][0],i=t[0][0],n=t[0][1],a=t[0][1],s=1;s<t.length;s++)e=Math.min(e,t[s][0]),i=Math.max(i,t[s][0]),n=Math.min(n,t[s][1]),a=Math.max(a,t[s][1]);return[i-e,a-n]}return[0,0]}},{key:"polygonPath",value:function(t){var e="";if(t.length){e="M".concat(t[0][0],",").concat(t[0][1]);for(var i=1;i<t.length;i++)e="".concat(e," L").concat(t[i][0],",").concat(t[i][1])}return e}},{key:"computePathSize",value:function(e){var i=[0,0];if(t&&self.document)try{var n="http://www.w3.org/2000/svg",a=self.document.createElementNS(n,"svg");a.setAttribute("width","0"),a.setAttribute("height","0");var s=self.document.createElementNS(n,"path");s.setAttribute("d",e),a.appendChild(s),self.document.body.appendChild(a);var r=s.getBBox();r&&(i[0]=r.width||0,i[1]=r.height||0),self.document.body.removeChild(a)}catch(t){}var o=this.getCanvasSize();return i[0]*i[1]||(i=o),i}},{key:"toPaths",value:function(t){var e=t.sets||[],i=t.options||this.defaultOptions,n=[],a=!0,s=!1,r=void 0;try{for(var o,h=e[Symbol.iterator]();!(a=(o=h.next()).done);a=!0){var l=o.value,c=null;switch(l.type){case"path":c={d:this.opsToPath(l),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:"none"};break;case"fillPath":c={d:this.opsToPath(l),stroke:"none",strokeWidth:0,fill:i.fill||"none"};break;case"fillSketch":c=this.fillSketch(l,i);break;case"path2Dfill":c={d:l.path||"",stroke:"none",strokeWidth:0,fill:i.fill||"none"};break;case"path2Dpattern":var u=l.size,d={x:0,y:0,width:1,height:1,viewBox:"0 0 ".concat(Math.round(u[0])," ").concat(Math.round(u[1])),patternUnits:"objectBoundingBox",path:this.fillSketch(l,i)};c={d:l.path,stroke:"none",strokeWidth:0,pattern:d};break}c&&n.push(c)}}catch(p){s=!0,r=p}finally{try{a||null==h.return||h.return()}finally{if(s)throw r}}return n}},{key:"fillSketch",value:function(t,e){var i=e.fillWeight;return i<0&&(i=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||"none",strokeWidth:i,fill:"none"}}},{key:"opsToPath",value:function(t){var e="",i=!0,n=!1,a=void 0;try{for(var s,r=t.ops[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var o=s.value,h=o.data;switch(o.op){case"move":e+="M".concat(h[0]," ").concat(h[1]," ");break;case"bcurveTo":e+="C".concat(h[0]," ").concat(h[1],", ").concat(h[2]," ").concat(h[3],", ").concat(h[4]," ").concat(h[5]," ");break;case"qcurveTo":e+="Q".concat(h[0]," ").concat(h[1],", ").concat(h[2]," ").concat(h[3]," ");break;case"lineTo":e+="L".concat(h[0]," ").concat(h[1]," ")}}}catch(l){n=!0,a=l}finally{try{i||null==r.return||r.return()}finally{if(n)throw a}}return e.trim()}}]),e}();function i(t,e){return t.type===e}var n={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:4,t:2,V:1,v:1,Z:0,z:0},a=function(){function t(e){Object(l["a"])(this,t),this.COMMAND=0,this.NUMBER=1,this.EOD=2,this.segments=[],this.parseData(e),this.processPoints()}return Object(c["a"])(t,[{key:"tokenize",value:function(t){for(var e=new Array;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:this.COMMAND,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return console.error("Unrecognized segment command: "+t),[];e[e.length]={type:this.NUMBER,text:"".concat(parseFloat(RegExp.$1))},t=t.substr(RegExp.$1.length)}return e[e.length]={type:this.EOD,text:""},e}},{key:"parseData",value:function(t){var e=this.tokenize(t),a=0,s=e[a],r="BOD";for(this.segments=new Array;!i(s,this.EOD);){var o=void 0,h=new Array;if("BOD"===r){if("M"!==s.text&&"m"!==s.text)return void this.parseData("M0,0"+t);a++,o=n[s.text],r=s.text}else i(s,this.NUMBER)?o=n[r]:(a++,o=n[s.text],r=s.text);if(a+o<e.length){for(var l=a;l<a+o;l++){var c=e[l];if(!i(c,this.NUMBER))return void console.error("Parameter type is not a number: "+r+","+c.text);h[h.length]=+c.text}if("number"!=typeof n[r])return void console.error("Unsupported segment type: "+r);var u={key:r,data:h};this.segments.push(u),s=e[a+=o],"M"===r&&(r="L"),"m"===r&&(r="l")}else console.error("Path data ended before all parameters were found")}}},{key:"processPoints",value:function(){for(var t=null,e=[0,0],i=0;i<this.segments.length;i++){var n=this.segments[i];switch(n.key){case"M":case"L":case"T":n.point=[n.data[0],n.data[1]];break;case"m":case"l":case"t":n.point=[n.data[0]+e[0],n.data[1]+e[1]];break;case"H":n.point=[n.data[0],e[1]];break;case"h":n.point=[n.data[0]+e[0],e[1]];break;case"V":n.point=[e[0],n.data[0]];break;case"v":n.point=[e[0],n.data[0]+e[1]];break;case"z":case"Z":t&&(n.point=[t[0],t[1]]);break;case"C":n.point=[n.data[4],n.data[5]];break;case"c":n.point=[n.data[4]+e[0],n.data[5]+e[1]];break;case"S":n.point=[n.data[2],n.data[3]];break;case"s":n.point=[n.data[2]+e[0],n.data[3]+e[1]];break;case"Q":n.point=[n.data[2],n.data[3]];break;case"q":n.point=[n.data[2]+e[0],n.data[3]+e[1]];break;case"A":n.point=[n.data[5],n.data[6]];break;case"a":n.point=[n.data[5]+e[0],n.data[6]+e[1]]}"m"!==n.key&&"M"!==n.key||(t=null),n.point&&(e=n.point,t||(t=n.point)),"z"!==n.key&&"Z"!==n.key||(t=null)}}},{key:"closed",get:function(){if(void 0===this._closed){this._closed=!1;var t=!0,e=!1,i=void 0;try{for(var n,a=this.segments[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var s=n.value;"z"===s.key.toLowerCase()&&(this._closed=!0)}}catch(r){e=!0,i=r}finally{try{t||null==a.return||a.return()}finally{if(e)throw i}}}return this._closed}}]),t}(),s=function(){function t(e){Object(l["a"])(this,t),this._position=[0,0],this._first=null,this.bezierReflectionPoint=null,this.quadReflectionPoint=null,this.parsed=new a(e)}return Object(c["a"])(t,[{key:"setPosition",value:function(t,e){this._position=[t,e],this._first||(this._first=[t,e])}},{key:"segments",get:function(){return this.parsed.segments}},{key:"closed",get:function(){return this.parsed.closed}},{key:"linearPoints",get:function(){if(!this._linearPoints){var t=[],e=[],i=!0,n=!1,a=void 0;try{for(var s,r=this.parsed.segments[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var o=s.value,h=o.key.toLowerCase();("m"!==h&&"z"!==h||(e.length&&(t.push(e),e=[]),"z"!==h))&&o.point&&e.push(o.point)}}catch(l){n=!0,a=l}finally{try{i||null==r.return||r.return()}finally{if(n)throw a}}e.length&&(t.push(e),e=[]),this._linearPoints=t}return this._linearPoints}},{key:"first",get:function(){return this._first},set:function(t){this._first=t}},{key:"position",get:function(){return this._position}},{key:"x",get:function(){return this._position[0]}},{key:"y",get:function(){return this._position[1]}}]),t}(),r=function(){function t(e,i,n,a,s,r){if(Object(l["a"])(this,t),this._segIndex=0,this._numSegs=0,this._rx=0,this._ry=0,this._sinPhi=0,this._cosPhi=0,this._C=[0,0],this._theta=0,this._delta=0,this._T=0,this._from=e,e[0]!==i[0]||e[1]!==i[1]){var o=Math.PI/180;this._rx=Math.abs(n[0]),this._ry=Math.abs(n[1]),this._sinPhi=Math.sin(a*o),this._cosPhi=Math.cos(a*o);var h=this._cosPhi*(e[0]-i[0])/2+this._sinPhi*(e[1]-i[1])/2,c=-this._sinPhi*(e[0]-i[0])/2+this._cosPhi*(e[1]-i[1])/2,u=0,d=this._rx*this._rx*this._ry*this._ry-this._rx*this._rx*c*c-this._ry*this._ry*h*h;if(d<0){var p=Math.sqrt(1-d/(this._rx*this._rx*this._ry*this._ry));this._rx=this._rx*p,this._ry=this._ry*p,u=0}else u=(s===r?-1:1)*Math.sqrt(d/(this._rx*this._rx*c*c+this._ry*this._ry*h*h));var f=u*this._rx*c/this._ry,g=-u*this._ry*h/this._rx;this._C=[0,0],this._C[0]=this._cosPhi*f-this._sinPhi*g+(e[0]+i[0])/2,this._C[1]=this._sinPhi*f+this._cosPhi*g+(e[1]+i[1])/2,this._theta=this.calculateVectorAngle(1,0,(h-f)/this._rx,(c-g)/this._ry);var v=this.calculateVectorAngle((h-f)/this._rx,(c-g)/this._ry,(-h-f)/this._rx,(-c-g)/this._ry);!r&&v>0?v-=2*Math.PI:r&&v<0&&(v+=2*Math.PI),this._numSegs=Math.ceil(Math.abs(v/(Math.PI/2))),this._delta=v/this._numSegs,this._T=8/3*Math.sin(this._delta/4)*Math.sin(this._delta/4)/Math.sin(this._delta/2)}}return Object(c["a"])(t,[{key:"getNextSegment",value:function(){if(this._segIndex===this._numSegs)return null;var t=Math.cos(this._theta),e=Math.sin(this._theta),i=this._theta+this._delta,n=Math.cos(i),a=Math.sin(i),s=[this._cosPhi*this._rx*n-this._sinPhi*this._ry*a+this._C[0],this._sinPhi*this._rx*n+this._cosPhi*this._ry*a+this._C[1]],r=[this._from[0]+this._T*(-this._cosPhi*this._rx*e-this._sinPhi*this._ry*t),this._from[1]+this._T*(-this._sinPhi*this._rx*e+this._cosPhi*this._ry*t)],o=[s[0]+this._T*(this._cosPhi*this._rx*a+this._sinPhi*this._ry*n),s[1]+this._T*(this._sinPhi*this._rx*a-this._cosPhi*this._ry*n)];return this._theta=i,this._from=[s[0],s[1]],this._segIndex++,{cp1:r,cp2:o,to:s}}},{key:"calculateVectorAngle",value:function(t,e,i,n){var a=Math.atan2(e,t),s=Math.atan2(n,i);return s>=a?s-a:2*Math.PI-(a-s)}}]),t}(),o=function(){function t(e,i){Object(l["a"])(this,t),this.sets=e,this.closed=i}return Object(c["a"])(t,[{key:"fit",value:function(t){var e=[],i=!0,n=!1,a=void 0;try{for(var s,r=this.sets[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var o=s.value,h=o.length,l=Math.floor(t*h);if(l<5){if(h<=5)continue;l=5}e.push(this.reduce(o,l))}}catch(v){n=!0,a=v}finally{try{i||null==r.return||r.return()}finally{if(n)throw a}}for(var c="",u=0,d=e;u<d.length;u++){for(var p=d[u],f=0;f<p.length;f++){var g=p[f];c+=0===f?"M"+g[0]+","+g[1]:"L"+g[0]+","+g[1]}this.closed&&(c+="z ")}return c}},{key:"distance",value:function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}},{key:"reduce",value:function(t,e){if(t.length<=e)return t;for(var i=t.slice(0);i.length>e;){for(var n=-1,a=-1,s=1;s<i.length-1;s++){var r=this.distance(i[s-1],i[s]),o=this.distance(i[s],i[s+1]),h=this.distance(i[s-1],i[s+1]),l=(r+o+h)/2,c=Math.sqrt(l*(l-r)*(l-o)*(l-h));(n<0||c<n)&&(n=c,a=s)}if(!(a>0))break;i.splice(a,1)}return i}}]),t}(),h=function(){function t(e,i){Object(l["a"])(this,t),this.xi=Number.MAX_VALUE,this.yi=Number.MAX_VALUE,this.px1=e[0],this.py1=e[1],this.px2=i[0],this.py2=i[1],this.a=this.py2-this.py1,this.b=this.px1-this.px2,this.c=this.px2*this.py1-this.px1*this.py2,this._undefined=0===this.a&&0===this.b&&0===this.c}return Object(c["a"])(t,[{key:"isUndefined",value:function(){return this._undefined}},{key:"intersects",value:function(t){if(this.isUndefined()||t.isUndefined())return!1;var e=Number.MAX_VALUE,i=Number.MAX_VALUE,n=0,a=0,s=this.a,r=this.b,o=this.c;return Math.abs(r)>1e-5&&(e=-s/r,n=-o/r),Math.abs(t.b)>1e-5&&(i=-t.a/t.b,a=-t.c/t.b),e===Number.MAX_VALUE?i===Number.MAX_VALUE?-o/s==-t.c/t.a&&(this.py1>=Math.min(t.py1,t.py2)&&this.py1<=Math.max(t.py1,t.py2)?(this.xi=this.px1,this.yi=this.py1,!0):this.py2>=Math.min(t.py1,t.py2)&&this.py2<=Math.max(t.py1,t.py2)&&(this.xi=this.px2,this.yi=this.py2,!0)):(this.xi=this.px1,this.yi=i*this.xi+a,!((this.py1-this.yi)*(this.yi-this.py2)<-1e-5||(t.py1-this.yi)*(this.yi-t.py2)<-1e-5)&&(!(Math.abs(t.a)<1e-5)||!((t.px1-this.xi)*(this.xi-t.px2)<-1e-5))):i===Number.MAX_VALUE?(this.xi=t.px1,this.yi=e*this.xi+n,!((t.py1-this.yi)*(this.yi-t.py2)<-1e-5||(this.py1-this.yi)*(this.yi-this.py2)<-1e-5)&&(!(Math.abs(s)<1e-5)||!((this.px1-this.xi)*(this.xi-this.px2)<-1e-5))):e===i?n===a&&(this.px1>=Math.min(t.px1,t.px2)&&this.px1<=Math.max(t.py1,t.py2)?(this.xi=this.px1,this.yi=this.py1,!0):this.px2>=Math.min(t.px1,t.px2)&&this.px2<=Math.max(t.px1,t.px2)&&(this.xi=this.px2,this.yi=this.py2,!0)):(this.xi=(a-n)/(e-i),this.yi=e*this.xi+n,!((this.px1-this.xi)*(this.xi-this.px2)<-1e-5||(t.px1-this.xi)*(this.xi-t.px2)<-1e-5))}}]),t}();function u(t,e){var i=t[1][1]-t[0][1],n=t[0][0]-t[1][0],a=i*t[0][0]+n*t[0][1],s=e[1][1]-e[0][1],r=e[0][0]-e[1][0],o=s*e[0][0]+r*e[0][1],h=i*r-s*n;return h?[Math.round((r*a-n*o)/h),Math.round((i*o-s*a)/h)]:null}var d=function(){function t(e,i,n,a,s,r,o,c){Object(l["a"])(this,t),this.deltaX=0,this.hGap=0,this.top=e,this.bottom=i,this.left=n,this.right=a,this.gap=s,this.sinAngle=r,this.tanAngle=c,Math.abs(r)<1e-4?this.pos=n+s:Math.abs(r)>.9999?this.pos=e+s:(this.deltaX=(i-e)*Math.abs(c),this.pos=n-Math.abs(this.deltaX),this.hGap=Math.abs(s/o),this.sLeft=new h([n,i],[n,e]),this.sRight=new h([a,i],[a,e]))}return Object(c["a"])(t,[{key:"nextLine",value:function(){if(Math.abs(this.sinAngle)<1e-4){if(this.pos<this.right){var t=[this.pos,this.top,this.pos,this.bottom];return this.pos+=this.gap,t}}else if(Math.abs(this.sinAngle)>.9999){if(this.pos<this.bottom){var e=[this.left,this.pos,this.right,this.pos];return this.pos+=this.gap,e}}else{var i=this.pos-this.deltaX/2,n=this.pos+this.deltaX/2,a=this.bottom,s=this.top;if(this.pos<this.right+this.deltaX){for(;i<this.left&&n<this.left||i>this.right&&n>this.right;)if(this.pos+=this.hGap,i=this.pos-this.deltaX/2,n=this.pos+this.deltaX/2,this.pos>this.right+this.deltaX)return null;var r=new h([i,a],[n,s]);this.sLeft&&r.intersects(this.sLeft)&&(i=r.xi,a=r.yi),this.sRight&&r.intersects(this.sRight)&&(n=r.xi,s=r.yi),this.tanAngle>0&&(i=this.right-(i-this.left),n=this.right-(n-this.left));var o=[i,a,n,s];return this.pos+=this.hGap,o}}return null}}]),t}();function p(t){var e=t[0],i=t[1];return Math.sqrt(Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2))}function f(t,e){for(var i=[],n=new h([t[0],t[1]],[t[2],t[3]]),a=0;a<e.length;a++){var s=new h(e[a],e[(a+1)%e.length]);n.intersects(s)&&i.push([n.xi,n.yi])}return i}function g(t,e,i,n,a,s,r){return[-i*s-n*a+i+s*t+a*e,r*(i*a-n*s)+n+-r*a*t+r*s*e]}function v(t,e){var i=[];if(t&&t.length){for(var n=t[0][0],a=t[0][0],s=t[0][1],r=t[0][1],o=1;o<t.length;o++)n=Math.min(n,t[o][0]),a=Math.max(a,t[o][0]),s=Math.min(s,t[o][1]),r=Math.max(r,t[o][1]);var h=e.hachureAngle,l=e.hachureGap;l<0&&(l=4*e.strokeWidth),l=Math.max(l,.1);for(var c,u=h%180*(Math.PI/180),p=Math.cos(u),g=Math.sin(u),v=Math.tan(u),y=new d(s-1,r+1,n-1,a+1,l,g,p,v);null!=(c=y.nextLine());)for(var m=f(c,t),b=0;b<m.length;b++)if(b<m.length-1){var x=m[b],w=m[b+1];i.push([x,w])}}return i}function y(t,e,i,n,a,s){var r=[],o=Math.abs(n/2),h=Math.abs(a/2);o+=t.randOffset(.05*o,s),h+=t.randOffset(.05*h,s);var l=s.hachureAngle,c=s.hachureGap;c<=0&&(c=4*s.strokeWidth);var u=s.fillWeight;u<0&&(u=s.strokeWidth/2);for(var d=l%180*(Math.PI/180),p=Math.tan(d),f=h/o,v=Math.sqrt(f*p*f*p+1),y=f*p/v,m=1/v,b=c/(o*h/Math.sqrt(h*m*(h*m)+o*y*(o*y))/o),x=Math.sqrt(o*o-(e-o+b)*(e-o+b)),w=e-o+b;w<e+o;w+=b){var M=g(w,i-(x=Math.sqrt(o*o-(e-w)*(e-w))),e,i,y,m,f),k=g(w,i+x,e,i,y,m,f);r.push([M,k])}return r}var m=function(){function t(e){Object(l["a"])(this,t),this.helper=e}return Object(c["a"])(t,[{key:"fillPolygon",value:function(t,e){return this._fillPolygon(t,e)}},{key:"fillEllipse",value:function(t,e,i,n,a){return this._fillEllipse(t,e,i,n,a)}},{key:"fillArc",value:function(t,e,i,n,a,s,r){return null}},{key:"_fillPolygon",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=v(t,e);return{type:"fillSketch",ops:this.renderLines(n,e,i)}}},{key:"_fillEllipse",value:function(t,e,i,n,a){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=y(this.helper,t,e,i,n,a);return{type:"fillSketch",ops:this.renderLines(r,a,s)}}},{key:"renderLines",value:function(t,e,i){var n=[],a=null,s=!0,r=!1,o=void 0;try{for(var h,l=t[Symbol.iterator]();!(s=(h=l.next()).done);s=!0){var c=h.value;n=n.concat(this.helper.doubleLineOps(c[0][0],c[0][1],c[1][0],c[1][1],e)),i&&a&&(n=n.concat(this.helper.doubleLineOps(a[0],a[1],c[0][0],c[0][1],e))),a=c[1]}}catch(u){r=!0,o=u}finally{try{s||null==l.return||l.return()}finally{if(r)throw o}}return n}}]),t}(),b=function(t){function e(){return Object(l["a"])(this,e),Object(C["a"])(this,Object(T["a"])(e).apply(this,arguments))}return Object(R["a"])(e,t),Object(c["a"])(e,[{key:"fillPolygon",value:function(t,e){return this._fillPolygon(t,e,!0)}},{key:"fillEllipse",value:function(t,e,i,n,a){return this._fillEllipse(t,e,i,n,a,!0)}}]),e}(m),x=function(t){function e(){return Object(l["a"])(this,e),Object(C["a"])(this,Object(T["a"])(e).apply(this,arguments))}return Object(R["a"])(e,t),Object(c["a"])(e,[{key:"fillPolygon",value:function(t,e){var i=this._fillPolygon(t,e),n=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),a=this._fillPolygon(t,n);return i.ops=i.ops.concat(a.ops),i}},{key:"fillEllipse",value:function(t,e,i,n,a){var s=this._fillEllipse(t,e,i,n,a),r=Object.assign({},a,{hachureAngle:a.hachureAngle+90}),o=this._fillEllipse(t,e,i,n,r);return s.ops=s.ops.concat(o.ops),s}}]),e}(m),w=function(){function t(e){Object(l["a"])(this,t),this.helper=e}return Object(c["a"])(t,[{key:"fillPolygon",value:function(t,e){var i=v(t,e=Object.assign({},e,{curveStepCount:4,hachureAngle:0}));return this.dotsOnLines(i,e)}},{key:"fillEllipse",value:function(t,e,i,n,a){a=Object.assign({},a,{curveStepCount:4,hachureAngle:0});var s=y(this.helper,t,e,i,n,a);return this.dotsOnLines(s,a)}},{key:"fillArc",value:function(t,e,i,n,a,s,r){return null}},{key:"dotsOnLines",value:function(t,e){var i=[],n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.max(n,.1);var a=e.fillWeight;a<0&&(a=e.strokeWidth/2);var s=!0,r=!1,o=void 0;try{for(var h,l=t[Symbol.iterator]();!(s=(h=l.next()).done);s=!0)for(var c=h.value,u=p(c)/n,d=Math.ceil(u)-1,f=Math.atan((c[1][1]-c[0][1])/(c[1][0]-c[0][0])),g=0;g<d;g++){var v=n*(g+1),y=v*Math.sin(f),m=v*Math.cos(f),b=[c[0][0]-m,c[0][1]+y],x=this.helper.randOffsetWithRange(b[0]-n/4,b[0]+n/4,e),w=this.helper.randOffsetWithRange(b[1]-n/4,b[1]+n/4,e),M=this.helper.ellipse(x,w,a,a,e);i=i.concat(M.ops)}}catch(k){r=!0,o=k}finally{try{s||null==l.return||l.return()}finally{if(r)throw o}}return{type:"fillSketch",ops:i}}}]),t}(),M=function(){function t(e){Object(l["a"])(this,t),this.helper=e}return Object(c["a"])(t,[{key:"fillPolygon",value:function(t,e){var i=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER],n=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER];t.forEach(function(t){i[0]=Math.min(i[0],t[0]),i[1]=Math.max(i[1],t[0]),n[0]=Math.min(n[0],t[1]),n[1]=Math.max(n[1],t[1])});var a=function(t){for(var e=0,i=0,n=0,a=0;a<t.length;a++){var s=t[a],r=a===t.length-1?t[0]:t[a+1];e+=s[0]*r[1]-r[0]*s[1]}e/=2;for(var o=0;o<t.length;o++){var h=t[o],l=o===t.length-1?t[0]:t[o+1];i+=(h[0]+l[0])*(h[0]*l[1]-l[0]*h[1]),n+=(h[1]+l[1])*(h[0]*l[1]-l[0]*h[1])}return[i/(6*e),n/(6*e)]}(t),s=Math.max(Math.sqrt(Math.pow(a[0]-i[0],2)+Math.pow(a[1]-n[0],2)),Math.sqrt(Math.pow(a[0]-i[1],2)+Math.pow(a[1]-n[1],2))),r=e.hachureGap>0?e.hachureGap:4*e.strokeWidth,o=[];if(t.length>2)for(var h=0;h<t.length;h++)h===t.length-1?o.push([t[h],t[0]]):o.push([t[h],t[h+1]]);for(var l=[],c=Math.max(1,Math.PI*s/r),d=function(t){var e=t*Math.PI/c,r=[a,[a[0]+s*Math.cos(e),a[1]+s*Math.sin(e)]];o.forEach(function(t){var e=u(t,r);e&&e[0]>=i[0]&&e[0]<=i[1]&&e[1]>=n[0]&&e[1]<=n[1]&&l.push(e)})},p=0;p<c;p++)d(p);l=this.removeDuplocatePoints(l);var f=this.createLinesFromCenter(a,l);return{type:"fillSketch",ops:this.drawLines(f,e)}}},{key:"fillEllipse",value:function(t,e,i,n,a){return this.fillArcSegment(t,e,i,n,0,2*Math.PI,a)}},{key:"fillArc",value:function(t,e,i,n,a,s,r){return this.fillArcSegment(t,e,i,n,a,s,r)}},{key:"fillArcSegment",value:function(t,e,i,n,a,s,r){var o=[t,e],h=i/2,l=n/2,c=Math.max(i/2,n/2),u=r.hachureGap;u<0&&(u=4*r.strokeWidth);for(var d=Math.max(1,Math.abs(s-a)*c/u),p=[],f=0;f<d;f++){var g=f*((s-a)/d)+a,v=c*Math.cos(g),y=c*Math.sin(g),m=Math.sqrt(h*h*y*y+l*l*v*v),b=h*l*v/m,x=h*l*y/m;p.push([o[0]+b,o[1]+x])}p=this.removeDuplocatePoints(p);var w=this.createLinesFromCenter(o,p);return{type:"fillSketch",ops:this.drawLines(w,r)}}},{key:"drawLines",value:function(t,e){var i=this,n=[];return t.forEach(function(t){var a=t[0],s=t[1];n=n.concat(i.helper.doubleLineOps(a[0],a[1],s[0],s[1],e))}),n}},{key:"createLinesFromCenter",value:function(t,e){return e.map(function(e){return[t,e]})}},{key:"removeDuplocatePoints",value:function(t){var e=new Set;return t.filter(function(t){var i=t.join(",");return!e.has(i)&&(e.add(i),!0)})}}]),t}(),k=function(){function t(e){Object(l["a"])(this,t),this.helper=e}return Object(c["a"])(t,[{key:"fillPolygon",value:function(t,e){var i=v(t,e);return{type:"fillSketch",ops:this.dashedLine(i,e)}}},{key:"fillEllipse",value:function(t,e,i,n,a){var s=y(this.helper,t,e,i,n,a);return{type:"fillSketch",ops:this.dashedLine(s,a)}}},{key:"fillArc",value:function(t,e,i,n,a,s,r){return null}},{key:"dashedLine",value:function(t,e){var i=this,n=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,a=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,s=[];return t.forEach(function(t){var r=p(t),o=Math.floor(r/(n+a)),h=(r+a-o*(n+a))/2,l=t[0],c=t[1];l[0]>c[0]&&(l=t[1],c=t[0]);for(var u=Math.atan((c[1]-l[1])/(c[0]-l[0])),d=0;d<o;d++){var f=d*(n+a),g=f+n,v=[l[0]+f*Math.cos(u)+h*Math.cos(u),l[1]+f*Math.sin(u)+h*Math.sin(u)],y=[l[0]+g*Math.cos(u)+h*Math.cos(u),l[1]+g*Math.sin(u)+h*Math.sin(u)];s=s.concat(i.helper.doubleLineOps(v[0],v[1],y[0],y[1],e))}}),s}}]),t}(),_=function(){function t(e){Object(l["a"])(this,t),this.helper=e}return Object(c["a"])(t,[{key:"fillPolygon",value:function(t,e){var i=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,n=e.zigzagOffset<0?i:e.zigzagOffset,a=v(t,e=Object.assign({},e,{hachureGap:i+n}));return{type:"fillSketch",ops:this.zigzagLines(a,n,e)}}},{key:"fillEllipse",value:function(t,e,i,n,a){var s=a.hachureGap<0?4*a.strokeWidth:a.hachureGap,r=a.zigzagOffset<0?s:a.zigzagOffset;a=Object.assign({},a,{hachureGap:s+r});var o=y(this.helper,t,e,i,n,a);return{type:"fillSketch",ops:this.zigzagLines(o,r,a)}}},{key:"fillArc",value:function(t,e,i,n,a,s,r){return null}},{key:"zigzagLines",value:function(t,e,i){var n=this,a=[];return t.forEach(function(t){var s=p(t),r=Math.round(s/(2*e)),o=t[0],h=t[1];o[0]>h[0]&&(o=t[1],h=t[0]);for(var l=Math.atan((h[1]-o[1])/(h[0]-o[0])),c=0;c<r;c++){var u=2*c*e,d=2*(c+1)*e,f=Math.sqrt(2*Math.pow(e,2)),g=[o[0]+u*Math.cos(l),o[1]+u*Math.sin(l)],v=[o[0]+d*Math.cos(l),o[1]+d*Math.sin(l)],y=[g[0]+f*Math.cos(l+Math.PI/4),g[1]+f*Math.sin(l+Math.PI/4)];a=(a=a.concat(n.helper.doubleLineOps(g[0],g[1],y[0],y[1],i))).concat(n.helper.doubleLineOps(y[0],y[1],v[0],v[1],i))}}),a}}]),t}(),O={};function P(t,e){var i=t.fillStyle||"hachure";if(!O[i])switch(i){case"zigzag":O[i]||(O[i]=new b(e));break;case"cross-hatch":O[i]||(O[i]=new x(e));break;case"dots":O[i]||(O[i]=new w(e));break;case"starburst":O[i]||(O[i]=new M(e));break;case"dashed":O[i]||(O[i]=new k(e));break;case"zigzag-line":O[i]||(O[i]=new _(e));break;case"hachure":default:O[i="hachure"]||(O[i]=new m(e))}return O[i]}var S={randOffset:function(t,e){return V(t,e)},randOffsetWithRange:function(t,e,i){return q(t,e,i)},ellipse:D,doubleLineOps:function(t,e,i,n,a){return W(t,e,i,n,a)}};function A(t,e,i,n,a){return{type:"path",ops:W(t,e,i,n,a)}}function E(t,e,i){var n=(t||[]).length;if(n>2){for(var a=[],s=0;s<n-1;s++)a=a.concat(W(t[s][0],t[s][1],t[s+1][0],t[s+1][1],i));return e&&(a=a.concat(W(t[n-1][0],t[n-1][1],t[0][0],t[0][1],i))),{type:"path",ops:a}}return 2===n?A(t[0][0],t[0][1],t[1][0],t[1][1],i):{type:"path",ops:[]}}function I(t,e,i,n,a){return function(t,e){return E(t,!0,e)}([[t,e],[t+i,e],[t+i,e+n],[t,e+n]],a)}function j(t,e){var i=B(t,1*(1+.2*e.roughness),e),n=B(t,1.5*(1+.22*e.roughness),e);return{type:"path",ops:i.concat(n)}}function D(t,e,i,n,a){var s=2*Math.PI/a.curveStepCount,r=Math.abs(i/2),o=Math.abs(n/2),h=U(s,t,e,r+=V(.05*r,a),o+=V(.05*o,a),1,s*q(.1,q(.4,1,a),a),a),l=U(s,t,e,r,o,1.5,0,a);return{type:"path",ops:h.concat(l)}}function z(t,e,i,n,a,s,r,o,h){var l=t,c=e,u=Math.abs(i/2),d=Math.abs(n/2);u+=V(.01*u,h),d+=V(.01*d,h);for(var p=a,f=s;p<0;)p+=2*Math.PI,f+=2*Math.PI;f-p>2*Math.PI&&(p=0,f=2*Math.PI);var g=2*Math.PI/h.curveStepCount,v=Math.min(g/2,(f-p)/2),y=X(v,l,c,u,d,p,f,1,h),m=X(v,l,c,u,d,p,f,1.5,h),b=y.concat(m);return r&&(o?b=(b=b.concat(W(l,c,l+u*Math.cos(p),c+d*Math.sin(p),h))).concat(W(l,c,l+u*Math.cos(f),c+d*Math.sin(f),h)):(b.push({op:"lineTo",data:[l,c]}),b.push({op:"lineTo",data:[l+u*Math.cos(p),c+d*Math.sin(p)]}))),{type:"path",ops:b}}function N(t,e){var i=[];if(t.length){var n=e.maxRandomnessOffset||0,a=t.length;if(a>2){i.push({op:"move",data:[t[0][0]+V(n,e),t[0][1]+V(n,e)]});for(var s=1;s<a;s++)i.push({op:"lineTo",data:[t[s][0]+V(n,e),t[s][1]+V(n,e)]})}}return{type:"fillPath",ops:i}}function F(t,e){return P(e,S).fillPolygon(t,e)}function q(t,e,i){return i.roughness*(Math.random()*(e-t)+t)}function V(t,e){return q(-t,t,e)}function W(t,e,i,n,a){var s=G(t,e,i,n,a,!0,!1),r=G(t,e,i,n,a,!0,!0);return s.concat(r)}function G(t,e,i,n,a,s,r){var o=Math.pow(t-i,2)+Math.pow(e-n,2),h=a.maxRandomnessOffset||0;h*h*100>o&&(h=Math.sqrt(o)/10);var l=h/2,c=.2+.2*Math.random(),u=a.bowing*a.maxRandomnessOffset*(n-e)/200,d=a.bowing*a.maxRandomnessOffset*(t-i)/200;u=V(u,a),d=V(d,a);var p=[],f=function(){return V(l,a)},g=function(){return V(h,a)};return s&&(r?p.push({op:"move",data:[t+f(),e+f()]}):p.push({op:"move",data:[t+V(h,a),e+V(h,a)]})),r?p.push({op:"bcurveTo",data:[u+t+(i-t)*c+f(),d+e+(n-e)*c+f(),u+t+2*(i-t)*c+f(),d+e+2*(n-e)*c+f(),i+f(),n+f()]}):p.push({op:"bcurveTo",data:[u+t+(i-t)*c+g(),d+e+(n-e)*c+g(),u+t+2*(i-t)*c+g(),d+e+2*(n-e)*c+g(),i+g(),n+g()]}),p}function B(t,e,i){var n=[];n.push([t[0][0]+V(e,i),t[0][1]+V(e,i)]),n.push([t[0][0]+V(e,i),t[0][1]+V(e,i)]);for(var a=1;a<t.length;a++)n.push([t[a][0]+V(e,i),t[a][1]+V(e,i)]),a===t.length-1&&n.push([t[a][0]+V(e,i),t[a][1]+V(e,i)]);return $(n,null,i)}function $(t,e,i){var n=t.length,a=[];if(n>3){var s=[],r=1-i.curveTightness;a.push({op:"move",data:[t[1][0],t[1][1]]});for(var o=1;o+2<n;o++){var h=t[o];s[0]=[h[0],h[1]],s[1]=[h[0]+(r*t[o+1][0]-r*t[o-1][0])/6,h[1]+(r*t[o+1][1]-r*t[o-1][1])/6],s[2]=[t[o+1][0]+(r*t[o][0]-r*t[o+2][0])/6,t[o+1][1]+(r*t[o][1]-r*t[o+2][1])/6],s[3]=[t[o+1][0],t[o+1][1]],a.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}if(e&&2===e.length){var l=i.maxRandomnessOffset;a.push({op:"lineTo",data:[e[0]+V(l,i),e[1]+V(l,i)]})}}else 3===n?(a.push({op:"move",data:[t[1][0],t[1][1]]}),a.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===n&&(a=a.concat(W(t[0][0],t[0][1],t[1][0],t[1][1],i)));return a}function U(t,e,i,n,a,s,r,o){var h=V(.5,o)-Math.PI/2,l=[];l.push([V(s,o)+e+.9*n*Math.cos(h-t),V(s,o)+i+.9*a*Math.sin(h-t)]);for(var c=h;c<2*Math.PI+h-.01;c+=t)l.push([V(s,o)+e+n*Math.cos(c),V(s,o)+i+a*Math.sin(c)]);return l.push([V(s,o)+e+n*Math.cos(h+2*Math.PI+.5*r),V(s,o)+i+a*Math.sin(h+2*Math.PI+.5*r)]),l.push([V(s,o)+e+.98*n*Math.cos(h+r),V(s,o)+i+.98*a*Math.sin(h+r)]),l.push([V(s,o)+e+.9*n*Math.cos(h+.5*r),V(s,o)+i+.9*a*Math.sin(h+.5*r)]),$(l,null,o)}function X(t,e,i,n,a,s,r,o,h){var l=s+V(.1,h),c=[];c.push([V(o,h)+e+.9*n*Math.cos(l-t),V(o,h)+i+.9*a*Math.sin(l-t)]);for(var u=l;u<=r;u+=t)c.push([V(o,h)+e+n*Math.cos(u),V(o,h)+i+a*Math.sin(u)]);return c.push([e+n*Math.cos(r),i+a*Math.sin(r)]),c.push([e+n*Math.cos(r),i+a*Math.sin(r)]),$(c,null,h)}function Y(t,e,i,n,a,s,r,o){for(var h=[],l=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.5],c=[0,0],u=0;u<2;u++)0===u?h.push({op:"move",data:[r.x,r.y]}):h.push({op:"move",data:[r.x+V(l[0],o),r.y+V(l[0],o)]}),c=[a+V(l[u],o),s+V(l[u],o)],h.push({op:"bcurveTo",data:[t+V(l[u],o),e+V(l[u],o),i+V(l[u],o),n+V(l[u],o),c[0],c[1]]});return r.setPosition(c[0],c[1]),h}function H(t,e,i,n){var a=[];switch(e.key){case"M":case"m":var s="m"===e.key;if(e.data.length>=2){var o=+e.data[0],h=+e.data[1];s&&(o+=t.x,h+=t.y);var l=1*(n.maxRandomnessOffset||0);o+=V(l,n),h+=V(l,n),t.setPosition(o,h),a.push({op:"move",data:[o,h]})}break;case"L":case"l":var c="l"===e.key;if(e.data.length>=2){var u=+e.data[0],d=+e.data[1];c&&(u+=t.x,d+=t.y),a=a.concat(W(t.x,t.y,u,d,n)),t.setPosition(u,d)}break;case"H":case"h":var p="h"===e.key;if(e.data.length){var f=+e.data[0];p&&(f+=t.x),a=a.concat(W(t.x,t.y,f,t.y,n)),t.setPosition(f,t.y)}break;case"V":case"v":var g="v"===e.key;if(e.data.length){var v=+e.data[0];g&&(v+=t.y),a=a.concat(W(t.x,t.y,t.x,v,n)),t.setPosition(t.x,v)}break;case"Z":case"z":t.first&&(a=a.concat(W(t.x,t.y,t.first[0],t.first[1],n)),t.setPosition(t.first[0],t.first[1]),t.first=null);break;case"C":case"c":var y="c"===e.key;if(e.data.length>=6){var m=+e.data[0],b=+e.data[1],x=+e.data[2],w=+e.data[3],M=+e.data[4],k=+e.data[5];y&&(m+=t.x,x+=t.x,M+=t.x,b+=t.y,w+=t.y,k+=t.y);var _=Y(m,b,x,w,M,k,t,n);a=a.concat(_),t.bezierReflectionPoint=[M+(M-x),k+(k-w)]}break;case"S":case"s":var O="s"===e.key;if(e.data.length>=4){var P=+e.data[0],S=+e.data[1],A=+e.data[2],E=+e.data[3];O&&(P+=t.x,A+=t.x,S+=t.y,E+=t.y);var I=P,C=S,T=i?i.key:"",R=null;"c"!==T&&"C"!==T&&"s"!==T&&"S"!==T||(R=t.bezierReflectionPoint),R&&(I=R[0],C=R[1]);var L=Y(I,C,P,S,A,E,t,n);a=a.concat(L),t.bezierReflectionPoint=[A+(A-P),E+(E-S)]}break;case"Q":case"q":var j="q"===e.key;if(e.data.length>=4){var D=+e.data[0],z=+e.data[1],N=+e.data[2],F=+e.data[3];j&&(D+=t.x,N+=t.x,z+=t.y,F+=t.y);var q=1*(1+.2*n.roughness),G=1.5*(1+.22*n.roughness);a.push({op:"move",data:[t.x+V(q,n),t.y+V(q,n)]});var B=[N+V(q,n),F+V(q,n)];a.push({op:"qcurveTo",data:[D+V(q,n),z+V(q,n),B[0],B[1]]}),a.push({op:"move",data:[t.x+V(G,n),t.y+V(G,n)]}),B=[N+V(G,n),F+V(G,n)],a.push({op:"qcurveTo",data:[D+V(G,n),z+V(G,n),B[0],B[1]]}),t.setPosition(B[0],B[1]),t.quadReflectionPoint=[N+(N-D),F+(F-z)]}break;case"T":case"t":var $="t"===e.key;if(e.data.length>=2){var U=+e.data[0],X=+e.data[1];$&&(U+=t.x,X+=t.y);var H=U,Z=X,Q=i?i.key:"",J=null;"q"!==Q&&"Q"!==Q&&"t"!==Q&&"T"!==Q||(J=t.quadReflectionPoint),J&&(H=J[0],Z=J[1]);var K=1*(1+.2*n.roughness),tt=1.5*(1+.22*n.roughness);a.push({op:"move",data:[t.x+V(K,n),t.y+V(K,n)]});var et=[U+V(K,n),X+V(K,n)];a.push({op:"qcurveTo",data:[H+V(K,n),Z+V(K,n),et[0],et[1]]}),a.push({op:"move",data:[t.x+V(tt,n),t.y+V(tt,n)]}),et=[U+V(tt,n),X+V(tt,n)],a.push({op:"qcurveTo",data:[H+V(tt,n),Z+V(tt,n),et[0],et[1]]}),t.setPosition(et[0],et[1]),t.quadReflectionPoint=[U+(U-H),X+(X-Z)]}break;case"A":case"a":var it="a"===e.key;if(e.data.length>=7){var nt=+e.data[0],at=+e.data[1],st=+e.data[2],rt=+e.data[3],ot=+e.data[4],ht=+e.data[5],lt=+e.data[6];if(it&&(ht+=t.x,lt+=t.y),ht===t.x&&lt===t.y)break;if(0===nt||0===at)a=a.concat(W(t.x,t.y,ht,lt,n)),t.setPosition(ht,lt);else for(var ct=0;ct<1;ct++)for(var ut=new r([t.x,t.y],[ht,lt],[nt,at],st,!!rt,!!ot),dt=ut.getNextSegment();dt;){var pt=Y(dt.cp1[0],dt.cp1[1],dt.cp2[0],dt.cp2[1],dt.to[0],dt.to[1],t,n);a=a.concat(pt),dt=ut.getNextSegment()}}break}return a}var Z=function(t){function e(){return Object(l["a"])(this,e),Object(C["a"])(this,Object(T["a"])(e).apply(this,arguments))}return Object(R["a"])(e,t),Object(c["a"])(e,[{key:"line",value:function(t,e,i,n,a){var s=this._options(a);return this._drawable("line",[A(t,e,i,n,s)],s)}},{key:"rectangle",value:function(t,e,i,n,a){var s=this._options(a),r=[];if(s.fill){var o=[[t,e],[t+i,e],[t+i,e+n],[t,e+n]];"solid"===s.fillStyle?r.push(N(o,s)):r.push(F(o,s))}return r.push(I(t,e,i,n,s)),this._drawable("rectangle",r,s)}},{key:"ellipse",value:function(t,e,i,n,a){var s=this._options(a),r=[];if(s.fill)if("solid"===s.fillStyle){var o=D(t,e,i,n,s);o.type="fillPath",r.push(o)}else r.push(function(t,e,i,n,a){return P(a,S).fillEllipse(t,e,i,n,a)}(t,e,i,n,s));return r.push(D(t,e,i,n,s)),this._drawable("ellipse",r,s)}},{key:"circle",value:function(t,e,i,n){var a=this.ellipse(t,e,i,i,n);return a.shape="circle",a}},{key:"linearPath",value:function(t,e){var i=this._options(e);return this._drawable("linearPath",[E(t,!1,i)],i)}},{key:"arc",value:function(t,e,i,n,a,s){var r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7?arguments[7]:void 0,h=this._options(o),l=[];if(r&&h.fill)if("solid"===h.fillStyle){var c=z(t,e,i,n,a,s,!0,!1,h);c.type="fillPath",l.push(c)}else l.push(function(t,e,i,n,a,s,r){var o=P(r,S).fillArc(t,e,i,n,a,s,r);if(o)return o;var h=t,l=e,c=Math.abs(i/2),u=Math.abs(n/2);c+=V(.01*c,r),u+=V(.01*u,r);for(var d=a,p=s;d<0;)d+=2*Math.PI,p+=2*Math.PI;p-d>2*Math.PI&&(d=0,p=2*Math.PI);for(var f=(p-d)/r.curveStepCount,g=[],v=d;v<=p;v+=f)g.push([h+c*Math.cos(v),l+u*Math.sin(v)]);return g.push([h+c*Math.cos(p),l+u*Math.sin(p)]),g.push([h,l]),F(g,r)}(t,e,i,n,a,s,h));return l.push(z(t,e,i,n,a,s,r,!0,h)),this._drawable("arc",l,h)}},{key:"curve",value:function(t,e){var i=this._options(e);return this._drawable("curve",[j(t,i)],i)}},{key:"polygon",value:function(t,e){var i=this._options(e),n=[];if(i.fill)if("solid"===i.fillStyle)n.push(N(t,i));else{var a=this.computePolygonSize(t),s=F([[0,0],[a[0],0],[a[0],a[1]],[0,a[1]]],i);s.type="path2Dpattern",s.size=a,s.path=this.polygonPath(t),n.push(s)}return n.push(E(t,!0,i)),this._drawable("polygon",n,i)}},{key:"path",value:function(t,e){var i=this._options(e),n=[];if(!t)return this._drawable("path",n,i);if(i.fill)if("solid"===i.fillStyle){var a={type:"path2Dfill",path:t,ops:[]};n.push(a)}else{var r=this.computePathSize(t),h=F([[0,0],[r[0],0],[r[0],r[1]],[0,r[1]]],i);h.type="path2Dpattern",h.size=r,h.path=t,n.push(h)}return n.push(function(t,e){t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");var i=new s(t);if(e.simplification){var n=new o(i.linearPoints,i.closed).fit(e.simplification);i=new s(n)}for(var a=[],r=i.segments||[],h=0;h<r.length;h++){var l=H(i,r[h],h>0?r[h-1]:null,e);l&&l.length&&(a=a.concat(l))}return{type:"path",ops:a}}(t,i)),this._drawable("path",n,i)}}]),e}(e),Q="undefined"!=typeof document,J=function(){function t(e){Object(l["a"])(this,t),this.canvas=e,this.ctx=this.canvas.getContext("2d")}return Object(c["a"])(t,[{key:"draw",value:function(t){var e=t.sets||[],i=t.options||this.getDefaultOptions(),n=this.ctx,a=!0,s=!1,r=void 0;try{for(var o,h=e[Symbol.iterator]();!(a=(o=h.next()).done);a=!0){var l=o.value;switch(l.type){case"path":n.save(),n.strokeStyle=i.stroke,n.lineWidth=i.strokeWidth,this._drawToContext(n,l),n.restore();break;case"fillPath":n.save(),n.fillStyle=i.fill||"",this._drawToContext(n,l),n.restore();break;case"fillSketch":this.fillSketch(n,l,i);break;case"path2Dfill":this.ctx.save(),this.ctx.fillStyle=i.fill||"";var c=new Path2D(l.path);this.ctx.fill(c),this.ctx.restore();break;case"path2Dpattern":var u=this.canvas.ownerDocument||Q&&document;if(u){var d=l.size,p=u.createElement("canvas"),f=p.getContext("2d"),g=this.computeBBox(l.path);g&&(g.width||g.height)?(p.width=this.canvas.width,p.height=this.canvas.height,f.translate(g.x||0,g.y||0)):(p.width=d[0],p.height=d[1]),this.fillSketch(f,l,i),this.ctx.save(),this.ctx.fillStyle=this.ctx.createPattern(p,"repeat");var v=new Path2D(l.path);this.ctx.fill(v),this.ctx.restore()}else console.error("Cannot render path2Dpattern. No defs/document defined.");break}}}catch(y){s=!0,r=y}finally{try{a||null==h.return||h.return()}finally{if(s)throw r}}}},{key:"computeBBox",value:function(t){if(Q)try{var e="http://www.w3.org/2000/svg",i=document.createElementNS(e,"svg");i.setAttribute("width","0"),i.setAttribute("height","0");var n=self.document.createElementNS(e,"path");n.setAttribute("d",t),i.appendChild(n),document.body.appendChild(i);var a=n.getBBox();return document.body.removeChild(i),a}catch(t){}return null}},{key:"fillSketch",value:function(t,e,i){var n=i.fillWeight;n<0&&(n=i.strokeWidth/2),t.save(),t.strokeStyle=i.fill||"",t.lineWidth=n,this._drawToContext(t,e),t.restore()}},{key:"_drawToContext",value:function(t,e){t.beginPath();var i=!0,n=!1,a=void 0;try{for(var s,r=e.ops[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var o=s.value,h=o.data;switch(o.op){case"move":t.moveTo(h[0],h[1]);break;case"bcurveTo":t.bezierCurveTo(h[0],h[1],h[2],h[3],h[4],h[5]);break;case"qcurveTo":t.quadraticCurveTo(h[0],h[1],h[2],h[3]);break;case"lineTo":t.lineTo(h[0],h[1])}}}catch(l){n=!0,a=l}finally{try{i||null==r.return||r.return()}finally{if(n)throw a}}"fillPath"===e.type?t.fill():t.stroke()}}]),t}(),K=function(t){function e(t,i){var n;return Object(l["a"])(this,e),n=Object(C["a"])(this,Object(T["a"])(e).call(this,t)),n.gen=new Z(i||null,n.canvas),n}return Object(R["a"])(e,t),Object(c["a"])(e,[{key:"getDefaultOptions",value:function(){return this.gen.defaultOptions}},{key:"line",value:function(t,e,i,n,a){var s=this.gen.line(t,e,i,n,a);return this.draw(s),s}},{key:"rectangle",value:function(t,e,i,n,a){var s=this.gen.rectangle(t,e,i,n,a);return this.draw(s),s}},{key:"ellipse",value:function(t,e,i,n,a){var s=this.gen.ellipse(t,e,i,n,a);return this.draw(s),s}},{key:"circle",value:function(t,e,i,n){var a=this.gen.circle(t,e,i,n);return this.draw(a),a}},{key:"linearPath",value:function(t,e){var i=this.gen.linearPath(t,e);return this.draw(i),i}},{key:"polygon",value:function(t,e){var i=this.gen.polygon(t,e);return this.draw(i),i}},{key:"arc",value:function(t,e,i,n,a,s){var r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7?arguments[7]:void 0,h=this.gen.arc(t,e,i,n,a,s,r,o);return this.draw(h),h}},{key:"curve",value:function(t,e){var i=this.gen.curve(t,e);return this.draw(i),i}},{key:"path",value:function(t,e){var i=this.gen.path(t,e);return this.draw(i),i}},{key:"generator",get:function(){return this.gen}}]),e}(J),tt="undefined"!=typeof document,et=function(){function t(e){Object(l["a"])(this,t),this.svg=e}return Object(c["a"])(t,[{key:"draw",value:function(t){var e=t.sets||[],i=t.options||this.getDefaultOptions(),n=this.svg.ownerDocument||window.document,a=n.createElementNS("http://www.w3.org/2000/svg","g"),s=!0,r=!1,o=void 0;try{for(var h,l=e[Symbol.iterator]();!(s=(h=l.next()).done);s=!0){var c=h.value,u=null;switch(c.type){case"path":(u=n.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",this.opsToPath(c)),u.style.stroke=i.stroke,u.style.strokeWidth=i.strokeWidth+"",u.style.fill="none";break;case"fillPath":(u=n.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",this.opsToPath(c)),u.style.stroke="none",u.style.strokeWidth="0",u.style.fill=i.fill||null;break;case"fillSketch":u=this.fillSketch(n,c,i);break;case"path2Dfill":(u=n.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",c.path||""),u.style.stroke="none",u.style.strokeWidth="0",u.style.fill=i.fill||null;break;case"path2Dpattern":if(this.defs){var d=c.size,p=n.createElementNS("http://www.w3.org/2000/svg","pattern"),f="rough-".concat(Math.floor(Math.random()*(Number.MAX_SAFE_INTEGER||999999)));p.setAttribute("id",f),p.setAttribute("x","0"),p.setAttribute("y","0"),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("height","1"),p.setAttribute("viewBox","0 0 ".concat(Math.round(d[0])," ").concat(Math.round(d[1]))),p.setAttribute("patternUnits","objectBoundingBox");var g=this.fillSketch(n,c,i);p.appendChild(g),this.defs.appendChild(p),(u=n.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",c.path||""),u.style.stroke="none",u.style.strokeWidth="0",u.style.fill="url(#".concat(f,")")}else console.error("Cannot render path2Dpattern. No defs/document defined.")}u&&a.appendChild(u)}}catch(v){r=!0,o=v}finally{try{s||null==l.return||l.return()}finally{if(r)throw o}}return a}},{key:"fillSketch",value:function(t,e,i){var n=i.fillWeight;n<0&&(n=i.strokeWidth/2);var a=t.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("d",this.opsToPath(e)),a.style.stroke=i.fill||null,a.style.strokeWidth=n+"",a.style.fill="none",a}},{key:"defs",get:function(){var t=this.svg.ownerDocument||tt&&document;if(t&&!this._defs){var e=t.createElementNS("http://www.w3.org/2000/svg","defs");this.svg.firstChild?this.svg.insertBefore(e,this.svg.firstChild):this.svg.appendChild(e),this._defs=e}return this._defs||null}}]),t}(),it=function(t){function e(t,i){var n;return Object(l["a"])(this,e),n=Object(C["a"])(this,Object(T["a"])(e).call(this,t)),n.gen=new Z(i||null,n.svg),n}return Object(R["a"])(e,t),Object(c["a"])(e,[{key:"getDefaultOptions",value:function(){return this.gen.defaultOptions}},{key:"opsToPath",value:function(t){return this.gen.opsToPath(t)}},{key:"line",value:function(t,e,i,n,a){var s=this.gen.line(t,e,i,n,a);return this.draw(s)}},{key:"rectangle",value:function(t,e,i,n,a){var s=this.gen.rectangle(t,e,i,n,a);return this.draw(s)}},{key:"ellipse",value:function(t,e,i,n,a){var s=this.gen.ellipse(t,e,i,n,a);return this.draw(s)}},{key:"circle",value:function(t,e,i,n){var a=this.gen.circle(t,e,i,n);return this.draw(a)}},{key:"linearPath",value:function(t,e){var i=this.gen.linearPath(t,e);return this.draw(i)}},{key:"polygon",value:function(t,e){var i=this.gen.polygon(t,e);return this.draw(i)}},{key:"arc",value:function(t,e,i,n,a,s){var r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7?arguments[7]:void 0,h=this.gen.arc(t,e,i,n,a,s,r,o);return this.draw(h)}},{key:"curve",value:function(t,e){var i=this.gen.curve(t,e);return this.draw(i)}},{key:"path",value:function(t,e){var i=this.gen.path(t,e);return this.draw(i)}},{key:"generator",get:function(){return this.gen}}]),e}(et);return{canvas:function(t,e){return new K(t,e)},svg:function(t,e){return new it(t,e)},generator:function(t,e){return new Z(t,e)}}}(),D=j;function z(t){var e=document.getElementById(t);e.width=350,e.height=500;var i=e.getContext("2d");i.translate(25,200);var n=D.canvas(document.getElementById(t));n.rectangle(5,5,300,200,{strokeWidth:5,fill:"#17120794",fillStyle:"solid"}),n.line(5,205,105,105),n.rectangle(45,-15,40,20,{fill:"#17120794"}),n.rectangle(230,-15,24,20,{fill:"#17120794"}),n.rectangle(150,30,130,80),n.rectangle(30,207,20,10,{strokeWidth:10}),n.rectangle(230,207,20,10,{strokeWidth:10})}function N(){g=document.querySelector("audio"),g.crossOrigin="anonymous",v=new AudioContext,y=v.createAnalyser(),m=v.createMediaElementSource(g),m.connect(y),y.connect(v.destination),y.fftSize=32,b=y.frequencyBinCount,x=new Uint8Array(b);var t=document.getElementById("canvas");t.width=350,t.height=500,k=t.getContext("2d"),k.translate(25,200),M=D.canvas(document.getElementById("canvas")),M.rectangle(5,5,300,200,{strokeWidth:5}),M.rectangle(150,30,130,80),M.rectangle(30,207,20,10,{strokeWidth:10}),M.rectangle(230,207,20,10,{strokeWidth:10}),M.circle(70,100,100,{fill:"black",fillStyle:"cross-hatch"}),z("canvas-shadow")}function F(){k.clearRect(150,30,130,80);for(var t=130/b,e=0;e<b;e++){var i=150+e*t,n=x[e]/255*80/2,a=110-n;M.rectangle(i,a,t,n,{fill:"green"})}}function q(){w=requestAnimationFrame(q),y.getByteFrequencyData(x),F()}function V(){return v}function W(){return w}var G,B,$,U,X={initAudio:N,rockMusic:q,getAudioCtx:V,getFrameID:W},Y=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},H={name:"HandDrawPlayer",data:function(){return{currentTime:"0:00",duration:"",timePercent:""}},props:{song:Object,resume:Boolean,songLoading:Boolean},methods:{onPlay:function(){var t=parseInt(this.$refs.audio.currentTime),e=parseInt(this.$refs.audio.duration);this.timePercent=parseInt(100*t/e),this.currentTime="".concat(Math.floor(t/60),":").concat(t%60>9?t%60:"0"+t%60)},loadInfo:function(){this.$emit("update:songLoading",!1);var t=parseInt(this.$refs.audio.duration);this.duration="".concat(Math.floor(t/60),":").concat(t%60>9?t%60:"0"+t%60),this.resume?this.$refs.audio.play():this.$refs.guideLine.classList.contains("hidden-guide")&&this.startPlay()},startPlay:function(){var t=this;this.$refs.guideLine.classList.add("hidden-guide"),this.resume?(this.$refs.audio.pause(),cancelAnimationFrame(X.getFrameID()),this.$emit("update:resume",!1)):X.getAudioCtx().resume().then(function(){t.$refs.audio.play(),X.rockMusic(),t.$emit("update:resume",!0)})},autoChange:function(){this.$emit("song-ended")}},mounted:function(){Y()?(this.$toast({text:"很遗憾,手机端无法使用audioAPI哦,马上为您跳转到主页",mode:"danger",duration:3e3}),setTimeout(function(){window.location.href="/"},1600)):X.initAudio()}},Z=H,Q=(i("132d"),i("2877")),J=Object(Q["a"])(Z,E,I,!1,null,"08aa3b83",null),K=J.exports;function tt(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;i<20;i++){var n=U/36*i+10,a=Math.PI/100*n,s=Math.round(20*Math.sin(a+e))+($-20)/2;t.push([n,s])}}var et=0;function it(){B.clearRect(0,0,1e3,1e3),et++,requestAnimationFrame(it),nt.forEach(function(t){var e=Math.PI/100*(t[0]+4*et);t[1]=Math.round(40*Math.sin(e))+($-20)/2}),at.forEach(function(t){var e=Math.PI/100*(t[0]+4.2*et);t[1]=Math.round(40*Math.sin(e+80))+($-20)/2}),G.curve(nt,{stroke:"black",strokeWidth:10}),G.curve(at,{stroke:"green",strokeWidth:10})}var nt=[],at=[],st=function(t){var e=document.getElementById(t);G=D.canvas(e),B=e.getContext("2d"),$=e.height,U=e.width,tt(nt),tt(at,50),it()};function rt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function ot(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?rt(i,!0).forEach(function(e){Object(h["a"])(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):rt(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var ht={name:"music",components:{HandDrawPlayer:K},data:function(){return{songList:[{}],currentSong:{songUrl:""},songFile:{},songImage:"",loading:!1,showList:!1,showUpload:!1,myMv:"",setID:"",resume:!1,songLoading:!0,showEdit:!1,onEditSong:{}}},methods:{autoChange:function(){var t=this,e=this.songList.findIndex(function(e){return e.name==t.currentSong.name}),i=Math.floor(Math.random()*this.songList.length);while(e==i&&this.songList.length>1)i=Math.floor(Math.random()*this.songList.length);this.currentSong=this.songList[i]},handlePlay:function(t){var e=this.$refs.player;e.$refs.guideLine.classList.add("hidden-guide"),this.currentSong._id==t._id?e.startPlay():this.currentSong=t},handleEdit:function(t){this.onEditSong=ot({},t),this.showEdit=!0},handlePreview:function(){var t=this.$root.$children[0].imgUrl,e=document.querySelector(".btn-image-preview");e.classList.toggle("on-preview"),t==this.onEditSong.songImage?this.$emit("postImg",this.currentSong.songImage,this.currentSong.songImage):this.$emit("postImg",this.onEditSong.songImage,this.onEditSong.songImage)},shakePlayer:function(){var t=this;this.$refs.player.$el.classList.add("shake"),setTimeout(function(){return t.$refs.player.$el.classList.remove("shake")},2e3)},getSong:function(){var t=this;return this.loading=!0,A.getMusic().then(function(e){t.songList=e,t.loading=!1,!t.currentSong._id&&(t.currentSong=t.songList[0]),t.$toast({text:"成功获取歌曲~~",mode:"success"})}).catch(function(e){t.shakePlayer(),t.$toast({text:"获取歌曲失败",mode:"danger"}),t.loading=!1})},selectSong:function(){this.songFile=this.$refs.ulDom.files[0]},localPlay:function(t){var e=this,i=t.target.files[0];if(!i.type.includes("audio"))return this.$toast({text:"请上传audio类型文件",mode:"danger"});var n=new FileReader;t.target.files=null,n.readAsDataURL(i),n.onload=function(t){e.currentSong.songUrl=t.target.result,e.currentSong.name=i.name}},delSong:function(t){var e=this;return this.loading=!0,A.delMusic(t).then(function(){e.$toast({text:"删除成功",mode:"success"}),e.loading=!1,e.getSong()}).catch(function(t){var i=t.response.data;e.loading=!1,e.shakePlayer(),e.$toast({text:"操作失败,   "+i,mode:"danger",duration:5e3})})},editSong:function(){var t=this;return A.updateMusic(this.onEditSong).then(function(){t.$toast({text:"更新成功",mode:"success"}),t.loading=!1,t.getSong()}).catch(function(e){var i=e.response.data;t.loading=!1,t.shakePlayer(),t.$toast({text:"操作失败,   "+i,mode:"danger",duration:5e3})})},uploadSong:function(){var t=this;if(!this.songFile.type.includes("audio"))return this.$toast({text:"请上传audio类型文件",mode:"danger"});var e=new FormData;e.append("musicFile",this.songFile),e.append("songImage",this.songImage),this.loading=!0,A.uploadMusic(e).then(function(e){t.$toast({text:e.data,mode:"success"}),t.loading=!1,t.songImage="",t.songFile="",t.showUpload=!1,t.getSong()}).catch(function(e){var i=e.response.data;t.loading=!1,t.shakePlayer(),t.$toast({text:"上传失败,   "+i,mode:"danger",duration:5e3})})}},watch:{currentSong:function(){this.$emit("postImg",this.currentSong.songImage,this.currentSong.name),this.songLoading=!0}},created:function(){this.getSong()},mounted:function(){st("song-load")}},lt=ht,ct=(i("63be"),Object(Q["a"])(lt,r,o,!1,null,null,null)),ut=ct.exports;i("6b54");function dt(t){if(this===window)return new dt(t);var e="string"===typeof t.image?document.getElementById(t.image):t.image;if("img"===e.tagName.toLowerCase())this.imgSource=null,this.img=e,this.initialize(t);else{var i=this,n=e.currentStyle||window.getComputedStyle(e,!1),a=n.backgroundImage.slice(4,-1).replace(/"/g,""),s=document.createElement("img");s.crossOrigin="anonymous",s.onload=function(){i.imgSource=e,i.img=this,i.initialize(t)},s.src=a,i.bckStyle=n}}function pt(t,e,i,n,a){this.x=Math.floor(e),this.y=Math.floor(i),this.r=Math.ceil(Math.random()*a+n),this.rainyday=t,this.context=t.context,this.reflection=t.reflected}function ft(){this.r=0,this.g=0,this.b=0,this.next=null}function gt(t,e,i){this.resolution=i,this.xc=t,this.yc=e,this.matrix=new Array(t);for(var n=0;n<=t+5;n++){this.matrix[n]=new Array(e);for(var a=0;a<=e+5;++a)this.matrix[n][a]=new vt(null)}}function vt(t){this.drop=t,this.next=null}function yt(t,e){var i=document.createElement("canvas"),n=i.getContext("2d");return i.width=e||50,i.height=i.width*t.height/t.width,n.drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),i}function mt(t){var e=new Audio(t);e.loop=!0,e.volume=.25,e.play()}dt.prototype.destroy=function(){var t=this;this.pause(),this.canvas.parentNode.removeChild(this.canvas),this.bckStyle&&(this.imgSource.style.background=this.bckStyle.background),Object.keys(this).forEach(function(e){delete t[e]})},dt.prototype.initialize=function(t){var e=this.imgSource||t.parentElement||document.getElementsByTagName("body")[0],i=window.getOffset(e);this.imgDownscaled=this.customDrop||yt(this.img,50),t.sound&&mt(t.sound);var n={opacity:1,blur:10,crop:[0,0,this.img.naturalWidth,this.img.naturalHeight],enableSizeChange:!0,parentElement:e,fps:24,fillStyle:"#8ED6FF",enableCollisions:!0,gravityThreshold:3,gravityAngle:Math.PI/2,gravityAngleVariance:0,reflectionScaledownFactor:5,reflectionDropMappingWidth:200,reflectionDropMappingHeight:200,width:e.clientWidth,height:e.clientHeight,position:"absolute",top:i.top+"px",left:i.left+"px"};for(var a in n)"undefined"===typeof t[a]&&(t[a]=n[a]);this.options=t,this.drops=[],this.canvas=this.options.canvas||this.prepareCanvas(),this.prepareBackground(),this.prepareGlass(),this.reflection=this.REFLECTION_MINIATURE,this.trail=this.TRAIL_DROPS,this.gravity=this.GRAVITY_NON_LINEAR,this.collision=this.COLLISION_SIMPLE,this.setRequestAnimFrame(),this.rain([[3,5,.5]],50)},dt.prototype.prepareCanvas=function(){var t=document.createElement("canvas"),e=this.options,i=e.position,n=e.top,a=e.left,s=e.width,r=e.height;return t.style.position=i,t.style.top=n,t.style.left=a,t.width=s,t.height=r,this.img.style.zIndex?(t.style.zIndex=this.img.style.zIndex,this.img.style.zIndex+=1):t.style.zIndex=99,this.imgSource?(this.options.parentElement.parentNode.insertBefore(t,this.imgSource),this.imgSource.style.zIndex=100,this.imgSource.style.position=i,this.imgSource.style.top=n,this.imgSource.style.left=a,this.imgSource.style.width=s,this.imgSource.style.height=r,this.imgSource.style.background="none",this.imgSource.style.width=s+"px"):this.options.parentElement.appendChild(t),this.options.parentElement.parentNode.style.height=this.options.height+"px",this.options.enableSizeChange&&this.setResizeHandler(),t},dt.prototype.setResizeHandler=function(){window.onresize=this.checkSize.bind(this),window.onorientationchange=this.checkSize.bind(this)},dt.prototype.checkSize=function(){var t=this.canvas,e=t.width,i=t.height,n=t.offsetLeft,a=t.offsetTop,s=this.options.parentElement.getBoundingClientRect(),r=s.width,o=s.bottom-s.top,h=r,l=o,c=s.left,u=s.top,d=e,p=i,f=n,g=a;this.options.parentElement.style.zIndex&&(this.canvas.style.zIndex=this.options.parentElement.style.zIndex),d===h&&p===l||(e=h,i=l,this.glass.width=e,this.glass.height=i,this.prepareBackground(),this.prepareReflections()),f===c&&g===u||(this.canvas.style.left=c,this.canvas.style.top=u)},dt.prototype.animateDrops=function(){this.addDropCallback&&this.addDropCallback();for(var t=this.drops.slice(),e=[],i=0;i<t.length;++i)t[i].animate()&&e.push(t[i]);this.drops=e,this.requestID=window.requestAnimFrame(this.animateDrops.bind(this))},dt.prototype.pause=function(){window.cancelAnimationFrame(this.requestID)},dt.prototype.resume=function(){this.requestID=window.requestAnimFrame(this.animateDrops.bind(this))},dt.prototype.setRequestAnimFrame=function(){var t=this.options.fps;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/t)}}()},dt.prototype.prepareReflections=function(){this.reflected=document.createElement("canvas"),this.reflected.width=Math.floor(this.canvas.width/this.options.reflectionScaledownFactor),this.reflected.height=Math.floor(this.canvas.height/this.options.reflectionScaledownFactor);var t=this.reflected.getContext("2d");t.drawImage(this.imgDownscaled,0,0,this.imgDownscaled.width,this.imgDownscaled.height,0,0,this.reflected.width,this.reflected.height)},dt.prototype.prepareGlass=function(){this.glass=document.createElement("canvas"),this.glass.width=this.canvas.width,this.glass.height=this.canvas.height,this.context=this.glass.getContext("2d")},dt.prototype.rain=function(t,e){if(this.reflection!==this.REFLECTION_NONE&&this.prepareReflections(),this.animateDrops(),this.presets=t,this.PRIVATE_GRAVITY_FORCE_FACTOR_Y=.001*this.options.fps/25,this.PRIVATE_GRAVITY_FORCE_FACTOR_X=(Math.PI/2-this.options.gravityAngle)*(.001*this.options.fps)/50,this.options.enableCollisions){for(var i=0,n=0;n<t.length;n++)t[n][0]+t[n][1]>i&&(i=Math.floor(t[n][0]+t[n][1]));if(i>0){var a=Math.ceil(this.canvas.width/i),s=Math.ceil(this.canvas.height/i);this.matrix=new gt(a,s,i)}else this.options.enableCollisions=!1}for(n=0;n<t.length;n++)t[n][3]||(t[n][3]=-1);var r=0;this.addDropCallback=function(){var i=(new Date).getTime();if(!(i-r<e)){r=i;var n,a=this.canvas.getContext("2d");a.clearRect(0,0,this.canvas.width,this.canvas.height),a.drawImage(this.background,0,0,this.canvas.width,this.canvas.height);for(var s=0;s<t.length;s++)if(t[s][2]>1||-1===t[s][3]){if(0!==t[s][3]){t[s][3]--;for(var o=0;o<t[s][2];++o)this.putDrop(new pt(this,Math.random()*this.canvas.width,Math.random()*this.canvas.height,t[s][0],t[s][1]))}}else if(Math.random()<t[s][2]){n=t[s];break}n&&this.putDrop(new pt(this,Math.random()*this.canvas.width,Math.random()*this.canvas.height,n[0],n[1])),a.save(),a.globalAlpha=this.options.opacity,a.drawImage(this.glass,0,0,this.canvas.width,this.canvas.height),a.restore()}}.bind(this)},dt.prototype.putDrop=function(t){t.draw(),this.gravity&&t.r>this.options.gravityThreshold&&(this.options.enableCollisions&&this.matrix.update(t),this.drops.push(t))},dt.prototype.clearDrop=function(t,e){var i=t.clear(e);if(i){var n=this.drops.indexOf(t);n>=0&&this.drops.splice(n,1)}return i},pt.prototype.draw=function(){this.context.save(),this.context.beginPath();var t=this.r;if(this.r=Math.floor(.95*this.r),this.r<3)this.context.arc(this.x,this.y,this.r,0,2*Math.PI,!0),this.context.closePath();else if(this.colliding||this.yspeed>2){if(this.colliding){var e=this.colliding;this.r=1.001*(this.r>e.r?this.r:e.r),this.x+=e.x-this.x,this.colliding=null}var i=1+.1*this.yspeed;this.context.moveTo(this.x-this.r/i,this.y),this.context.bezierCurveTo(this.x-this.r,this.y-2*this.r,this.x+this.r,this.y-2*this.r,this.x+this.r/i,this.y),this.context.bezierCurveTo(this.x+this.r,this.y+i*this.r,this.x-this.r,this.y+i*this.r,this.x-this.r/i,this.y)}else this.context.arc(this.x,this.y,.9*this.r,0,2*Math.PI,!0),this.context.closePath();this.context.clip(),this.r=t,this.rainyday.reflection&&this.rainyday.reflection(this),this.context.restore()},pt.prototype.clear=function(t){return this.context.clearRect(this.x-this.r-1,this.y-this.r-2,2*this.r+2,2*this.r+2),t?(this.terminate=!0,!0):this.y-this.r>this.rainyday.canvas.height||this.x-this.r>this.rainyday.canvas.width||this.x+this.r<0},pt.prototype.animate=function(){if(this.terminate)return!1;var t=this.rainyday.gravity(this);if(!t&&this.rainyday.trail&&this.rainyday.trail(this),this.rainyday.options.enableCollisions){var e=this.rainyday.matrix.update(this,t);e&&this.rainyday.collision(this,e)}return!t||this.terminate},dt.prototype.TRAIL_NONE=function(){},dt.prototype.TRAIL_DROPS=function(t){(!t.trailY||t.y-t.trailY>=100*Math.random()*t.r)&&(t.trailY=t.y,this.putDrop(new pt(this,Math.floor(t.x+(2*Math.random()-1)*Math.random()),t.y-t.r-5,Math.ceil(t.r/5),0)))},dt.prototype.TRAIL_SMUDGE=function(t){var e=t.y-t.r-3,i=t.x-Math.floor(t.r/2)+2*Math.random();e<0||i<0||this.context.drawImage(this.clearbackground,i,e,t.r,2,i,e,t.r,2)},dt.prototype.GRAVITY_NONE=function(){return!0},dt.prototype.GRAVITY_LINEAR=function(t){return!!this.clearDrop(t)||(t.yspeed?(t.yspeed+=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y*Math.floor(t.r),t.xspeed+=Math.floor(this.PRIVATE_GRAVITY_FORCE_FACTOR_X*Math.floor(t.r))):(t.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y,t.xspeed=Math.floor(this.PRIVATE_GRAVITY_FORCE_FACTOR_X)),t.y+=Math.floor(t.yspeed),t.draw(),!1)},dt.prototype.GRAVITY_NON_LINEAR=function(t){return!!this.clearDrop(t)||(t.collided?(t.collided=!1,t.seed=Math.floor(t.r*Math.random()*this.options.fps),t.skipping=!1,t.slowing=!1):(!t.seed||t.seed<0)&&(t.seed=Math.floor(t.r*Math.random()*this.options.fps),t.skipping=!1===t.skipping,t.slowing=!0),t.seed--,t.yspeed?t.slowing?(t.yspeed/=1.1,t.xspeed/=1.1,t.yspeed<this.PRIVATE_GRAVITY_FORCE_FACTOR_Y&&(t.slowing=!1)):t.skipping?(t.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y,t.xspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_X):(t.yspeed+=1*this.PRIVATE_GRAVITY_FORCE_FACTOR_Y*Math.floor(t.r),t.xspeed+=1*this.PRIVATE_GRAVITY_FORCE_FACTOR_X*Math.floor(t.r)):(t.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y,t.xspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_X),0!==this.options.gravityAngleVariance&&(t.xspeed+=(2*Math.random()-1)*t.yspeed*this.options.gravityAngleVariance),t.y+=Math.floor(t.yspeed),t.x+=Math.floor(t.xspeed),t.draw(),!1)},dt.prototype.positiveMin=function(t,e){var i=0;return i=t<e?t<=0?e:t:e<=0?t:e,i<=0?1:i},dt.prototype.REFLECTION_NONE=function(){this.context.fillStyle=this.options.fillStyle,this.context.fill()},dt.prototype.REFLECTION_MINIATURE=function(t){var e=Math.max((t.x-this.options.reflectionDropMappingWidth)/this.options.reflectionScaledownFactor,0),i=Math.max((t.y-this.options.reflectionDropMappingHeight)/this.options.reflectionScaledownFactor,0),n=this.positiveMin(2*this.options.reflectionDropMappingWidth/this.options.reflectionScaledownFactor,this.reflected.width-e),a=this.positiveMin(2*this.options.reflectionDropMappingHeight/this.options.reflectionScaledownFactor,this.reflected.height-i),s=Math.max(t.x-1.1*t.r,0),r=Math.max(t.y-1.1*t.r,0);this.context.drawImage(this.reflected,Math.floor(e),Math.floor(i),Math.floor(n),Math.floor(a),Math.floor(s),Math.floor(r),2*t.r,2*t.r)},dt.prototype.COLLISION_SIMPLE=function(t,e){var i,n,a,s=e;while(null!=s){var r=s.drop,o=t.r+r.r,h=t.x-r.x,l=t.y-r.y;if(Math.abs(h)<o&&Math.abs(l)<o&&Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))<t.r+r.r){i=r;break}s=s.next}i&&(t.y>i.y?(n=t,a=i):(n=i,a=t),this.clearDrop(a),this.clearDrop(n,!0),this.matrix.remove(n),a.draw(),a.colliding=n,a.collided=!0)},dt.prototype.prepareBackground=function(){this.background=document.createElement("canvas"),this.background.width=this.canvas.width,this.background.height=this.canvas.height,this.clearbackground=document.createElement("canvas"),this.clearbackground.width=this.canvas.width,this.clearbackground.height=this.canvas.height;var t=this.background.getContext("2d");t.drawImage(this.img,this.options.crop[0],this.options.crop[1],this.options.crop[2],this.options.crop[3],0,0,this.canvas.width,this.canvas.height),t=this.clearbackground.getContext("2d"),t.drawImage(this.img,this.options.crop[0],this.options.crop[1],this.options.crop[2],this.options.crop[3],0,0,this.canvas.width,this.canvas.height),!isNaN(this.options.blur)&&this.options.blur>=1&&this.stackBlurCanvasRGB(this.canvas.width,this.canvas.height,this.options.blur)},dt.prototype.stackBlurCanvasRGB=function(t,e,i){var n=[[0,9],[1,11],[2,12],[3,13],[5,14],[7,15],[11,16],[15,17],[22,18],[31,19],[45,20],[63,21],[90,22],[127,23],[181,24]],a=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];i|=0;var s,r,o,h,l,c,u,d,p,f,g,v,y,m,b,x,w,M,k,_,O=this.background.getContext("2d"),P=O.getImageData(0,0,t,e),S=P.data,A=i+1,E=A*(A+1)/2,I=new ft,C=new ft,T=I;for(o=1;o<2*i+1;o++)T=T.next=new ft,o===A&&(C=T);T.next=I;var R=null,L=null;u=c=0;for(var j,D=a[i],z=0;z<n.length;++z)if(i<=n[z][0]){j=n[z-1][1];break}for(r=0;r<e;r++){for(m=b=x=d=p=f=0,g=A*(w=S[c]),v=A*(M=S[c+1]),y=A*(k=S[c+2]),d+=E*w,p+=E*M,f+=E*k,T=I,o=0;o<A;o++)T.r=w,T.g=M,T.b=k,T=T.next;for(o=1;o<A;o++)h=c+((t-1<o?t-1:o)<<2),d+=(T.r=w=S[h])*(_=A-o),p+=(T.g=M=S[h+1])*_,f+=(T.b=k=S[h+2])*_,m+=w,b+=M,x+=k,T=T.next;for(R=I,L=C,s=0;s<t;s++)S[c]=d*D>>j,S[c+1]=p*D>>j,S[c+2]=f*D>>j,d-=g,p-=v,f-=y,g-=R.r,v-=R.g,y-=R.b,h=u+((h=s+i+1)<t-1?h:t-1)<<2,m+=R.r=S[h],b+=R.g=S[h+1],x+=R.b=S[h+2],d+=m,p+=b,f+=x,R=R.next,g+=w=L.r,v+=M=L.g,y+=k=L.b,m-=w,b-=M,x-=k,L=L.next,c+=4;u+=t}for(s=0;s<t;s++){for(b=x=m=p=f=d=0,c=s<<2,g=A*(w=S[c]),v=A*(M=S[c+1]),y=A*(k=S[c+2]),d+=E*w,p+=E*M,f+=E*k,T=I,o=0;o<A;o++)T.r=w,T.g=M,T.b=k,T=T.next;for(l=t,o=1;o<A;o++)c=l+s<<2,d+=(T.r=w=S[c])*(_=A-o),p+=(T.g=M=S[c+1])*_,f+=(T.b=k=S[c+2])*_,m+=w,b+=M,x+=k,T=T.next,o<e-1&&(l+=t);for(c=s,R=I,L=C,r=0;r<e;r++)h=c<<2,S[h]=d*D>>j,S[h+1]=p*D>>j,S[h+2]=f*D>>j,d-=g,p-=v,f-=y,g-=R.r,v-=R.g,y-=R.b,h=s+((h=r+A)<e-1?h:e-1)*t<<2,d+=m+=R.r=S[h],p+=b+=R.g=S[h+1],f+=x+=R.b=S[h+2],R=R.next,g+=w=L.r,v+=M=L.g,y+=k=L.b,m-=w,b-=M,x-=k,L=L.next,c+=t}O.putImageData(P,0,0)},gt.prototype.update=function(t,e){if(t.gid){if(!this.matrix[t.gmx]||!this.matrix[t.gmx][t.gmy])return null;if(this.matrix[t.gmx][t.gmy].remove(t),e)return null;if(t.gmx=Math.floor(t.x/this.resolution),t.gmy=Math.floor(t.y/this.resolution),!this.matrix[t.gmx]||!this.matrix[t.gmx][t.gmy])return null;this.matrix[t.gmx][t.gmy].add(t);var i=this.collisions(t);if(i&&null!=i.next)return i.next}else{if(t.gid=Math.random().toString(36).substr(2,9),t.gmx=Math.floor(t.x/this.resolution),t.gmy=Math.floor(t.y/this.resolution),!this.matrix[t.gmx]||!this.matrix[t.gmx][t.gmy])return null;this.matrix[t.gmx][t.gmy].add(t)}return null},gt.prototype.collisions=function(t){var e=new vt(null),i=e;return e=this.addAll(e,t.gmx-1,t.gmy+1),e=this.addAll(e,t.gmx,t.gmy+1),e=this.addAll(e,t.gmx+1,t.gmy+1),i},gt.prototype.addAll=function(t,e,i){if(e>0&&i>0&&e<this.xc&&i<this.yc){var n=this.matrix[e][i];while(null!=n.next)n=n.next,t.next=new vt(n.drop),t=t.next}return t},gt.prototype.remove=function(t){this.matrix[t.gmx][t.gmy].remove(t)},vt.prototype.add=function(t){var e=this;while(null!=e.next)e=e.next;e.next=new vt(t)},vt.prototype.remove=function(t){var e=this,i=null;while(null!=e.next)i=e,e=e.next,e.drop.gid===t.gid&&(i.next=e.next)},window.getOffset=function(t){"string"===typeof t&&(t=document.getElementById(t));var e,i,n,a,s=t;if(s)return s.getClientRects().length?(n=s.getBoundingClientRect(),e=s.ownerDocument,i=e.documentElement,a=e.defaultView,{top:n.top+a.pageYOffset-i.clientTop,left:n.left+a.pageXOffset-i.clientLeft}):{top:0,left:0}};var bt=dt,xt={},wt={name:"app",data:function(){return{imgUrl:"",appStyle:{}}},components:{music:ut},methods:{changeImage:function(t,e){var i="https://w.wallhaven.cc/full/0j/wallhaven-0jk2gw.jpg";t=t||i,this.imgUrl=t,this.appStyle={background:"url(".concat(t,") center no-repeat")},setTimeout(function(){"Rain"==e?xt.instance=new bt({image:"app"}):xt.instance&&xt.instance.canvas&&xt.instance.destroy()})}}},Mt=wt,kt=(i("034f"),Object(Q["a"])(Mt,a,s,!1,null,null,null)),_t=kt.exports,Ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isShow?i("div",{class:["toast",t.mode]},[t._v(t._s(t.text))]):t._e()},Pt=[],St={name:"toast",data:function(){return{text:"",duration:1,isShow:!0,mode:"primary",top:"15px"}},created:function(){var t=document.querySelectorAll(".toast").length;console.log(t),this.top="".concat(75*t+15,"px")},mounted:function(){var t=this;setTimeout(function(){t.isShow=!1},this.duration)}},At=St,Et=(i("dd9f"),Object(Q["a"])(At,Ot,Pt,!1,null,"0d3ed54a",null)),It=Et.exports,Ct={install:function(t){t.prototype.$toast=function(e){var i=e.text,n=e.duration,a=void 0===n?3e3:n,s=e.mode,r=void 0===s?"primary":s,o=t.extend(It),h=new o({el:document.createElement("div"),data:function(){return{text:i,duration:a,mode:r,isShow:!0}}});document.body.appendChild(h.$el),setTimeout(function(){return h.$el.style.top=h.top})}}},Tt=Ct;n["a"].config.productionTip=!1,n["a"].use(Tt),new n["a"]({render:function(t){return t(_t)}}).$mount("#app")},"63be":function(t,e,i){"use strict";var n=i("b259"),a=i.n(n);a.a},"64a9":function(t,e,i){},"76d5":function(t,e,i){},b259:function(t,e,i){},dd9f:function(t,e,i){"use strict";var n=i("495c"),a=i.n(n);a.a}});
//# sourceMappingURL=app.f8eb94b2.js.map