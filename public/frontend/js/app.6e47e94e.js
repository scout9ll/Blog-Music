(function(t){function e(e){for(var n,r,o=e[0],h=e[1],l=e[2],u=0,f=[];u<o.length;u++)r=o[u],i[r]&&f.push(i[r][0]),i[r]=0;for(n in h)Object.prototype.hasOwnProperty.call(h,n)&&(t[n]=h[n]);c&&c(e);while(f.length)f.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var h=a[o];0!==i[h]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/frontend/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=h;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"01d1":function(t,e,a){"use strict";var n=a("ee5c"),i=a.n(n);i.a},"025f":function(t,e,a){},"034f":function(t,e,a){"use strict";var n=a("64a9"),i=a.n(n);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("img",{attrs:{alt:"Vue logo",src:t.imgUrl}}),a("music",{attrs:{msg:"Welcome to Your Vue.js App"},on:{postImg:t.changeImage}})],1)},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"music",staticClass:"music"},[a("div",{staticClass:"action-state"},[t.loading?a("div",{staticClass:"loading"},[t._v("loading...")]):t._e(),t.error.length>1?a("div",{staticClass:"error"},[t._v(t._s(t.error))]):t._e(),t.message.length>1?a("div",{staticClass:"message"},[t._v(t._s(t.message))]):t._e()]),a("button",{class:["btn-list",t.showList?"btn-list-active":""],on:{click:function(){return t.showList=!t.showList}}},[t._v("MyList")]),a("div",{class:["songList",t.showList?"songList-active":""]},[t._l(t.songList,function(e){return a("div",{key:e.songUrl,staticClass:"songList-item"},[a("span",{on:{dblclick:function(){return t.currentSong=e}}},[t._v(t._s(e.name))]),a("span",{staticClass:"songImage"},[t._v(t._s(e.songImage))]),a("button",{attrs:{disabled:t.loading},on:{click:function(a){return t.delSong(e._id)}}},[t._v("删除")])])}),a("div",{staticClass:"add"},[a("input",{ref:"ulDom",attrs:{type:"file",name:"musicFile"},on:{change:t.selectSong}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.songImage,expression:"songImage"}],attrs:{type:"text"},domProps:{value:t.songImage},on:{input:function(e){e.target.composing||(t.songImage=e.target.value)}}}),a("button",{on:{click:t.uploadSong}},[t._v("upload")]),a("button",{on:{click:t.getSong}},[t._v("get")])])],2),a("HandDrawPlayer",{attrs:{song:t.currentSong},on:{"song-ended":t.autoChange}})],1)},o=[],h=(a("7f7f"),a("20d6"),a("8e6e"),a("ac6a"),a("456d"),a("bd86")),l=a("d225"),c=a("b0b4"),u=a("bc3a"),f=a.n(u);function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(a,!0).forEach(function(e){Object(h["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var v,g,y,b,m,k,M,_,x,w="api/music/",P=function(){function t(){Object(l["a"])(this,t)}return Object(c["a"])(t,null,[{key:"getMusic",value:function(){return f.a.get(w,{"Content-Type":"application/json"}).then(function(t){return t.data.map(function(t){return d({},t)})})}},{key:"addMusic",value:function(t){return f.a.post(w,t,{"Content-Type":"application/json"})}},{key:"uploadMusic",value:function(t){return f.a.post("".concat(w,"upload"),t,{"Content-Type":"multipart/form-data"})}},{key:"delMusic",value:function(t){return f.a.delete("".concat(w).concat(t))}}]),t}(),O=P,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"player"},[a("button",{class:[t.resume?"btn-play-active":""],on:{click:t.startPlay}}),a("audio",{ref:"audio",attrs:{src:t.song.songUrl},on:{timeupdate:t.onPlay,canplay:t.loadInfo,ended:t.autoChange}}),a("canvas",{attrs:{id:"canvas"}}),a("div",{staticClass:"songInfo"},[a("div",{staticClass:"songName"},[t._v(t._s(t.song.name))]),a("div",{staticClass:"time"},[t._v(t._s(t.currentTime)+"/"+t._s(t.duration))])])])},j=[],A=(a("34ef"),a("a481"),a("5df3"),a("4f7f"),a("9278"),a("87f3"),a("308d")),E=a("6bb5"),C=a("4e2b"),L=(a("c5f6"),a("3b2b"),a("4917"),a("6c7b"),a("ac4d"),a("8a81"),a("7618")),T=function(){var t="undefined"!=typeof self,e=function(){function e(t,a){Object(l["a"])(this,e),this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1},this.config=t||{},this.surface=a,this.config.options&&(this.defaultOptions=this._options(this.config.options))}return Object(c["a"])(e,[{key:"_options",value:function(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}},{key:"_drawable",value:function(t,e,a){return{shape:t,sets:e||[],options:a||this.defaultOptions}}},{key:"getCanvasSize",value:function(){var t=function(t){return t&&"object"==Object(L["a"])(t)&&t.baseVal&&t.baseVal.value?t.baseVal.value:t||100};return this.surface?[t(this.surface.width),t(this.surface.height)]:[100,100]}},{key:"computePolygonSize",value:function(t){if(t.length){for(var e=t[0][0],a=t[0][0],n=t[0][1],i=t[0][1],s=1;s<t.length;s++)e=Math.min(e,t[s][0]),a=Math.max(a,t[s][0]),n=Math.min(n,t[s][1]),i=Math.max(i,t[s][1]);return[a-e,i-n]}return[0,0]}},{key:"polygonPath",value:function(t){var e="";if(t.length){e="M".concat(t[0][0],",").concat(t[0][1]);for(var a=1;a<t.length;a++)e="".concat(e," L").concat(t[a][0],",").concat(t[a][1])}return e}},{key:"computePathSize",value:function(e){var a=[0,0];if(t&&self.document)try{var n="http://www.w3.org/2000/svg",i=self.document.createElementNS(n,"svg");i.setAttribute("width","0"),i.setAttribute("height","0");var s=self.document.createElementNS(n,"path");s.setAttribute("d",e),i.appendChild(s),self.document.body.appendChild(i);var r=s.getBBox();r&&(a[0]=r.width||0,a[1]=r.height||0),self.document.body.removeChild(i)}catch(t){}var o=this.getCanvasSize();return a[0]*a[1]||(a=o),a}},{key:"toPaths",value:function(t){var e=t.sets||[],a=t.options||this.defaultOptions,n=[],i=!0,s=!1,r=void 0;try{for(var o,h=e[Symbol.iterator]();!(i=(o=h.next()).done);i=!0){var l=o.value,c=null;switch(l.type){case"path":c={d:this.opsToPath(l),stroke:a.stroke,strokeWidth:a.strokeWidth,fill:"none"};break;case"fillPath":c={d:this.opsToPath(l),stroke:"none",strokeWidth:0,fill:a.fill||"none"};break;case"fillSketch":c=this.fillSketch(l,a);break;case"path2Dfill":c={d:l.path||"",stroke:"none",strokeWidth:0,fill:a.fill||"none"};break;case"path2Dpattern":var u=l.size,f={x:0,y:0,width:1,height:1,viewBox:"0 0 ".concat(Math.round(u[0])," ").concat(Math.round(u[1])),patternUnits:"objectBoundingBox",path:this.fillSketch(l,a)};c={d:l.path,stroke:"none",strokeWidth:0,pattern:f};break}c&&n.push(c)}}catch(p){s=!0,r=p}finally{try{i||null==h.return||h.return()}finally{if(s)throw r}}return n}},{key:"fillSketch",value:function(t,e){var a=e.fillWeight;return a<0&&(a=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||"none",strokeWidth:a,fill:"none"}}},{key:"opsToPath",value:function(t){var e="",a=!0,n=!1,i=void 0;try{for(var s,r=t.ops[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var o=s.value,h=o.data;switch(o.op){case"move":e+="M".concat(h[0]," ").concat(h[1]," ");break;case"bcurveTo":e+="C".concat(h[0]," ").concat(h[1],", ").concat(h[2]," ").concat(h[3],", ").concat(h[4]," ").concat(h[5]," ");break;case"qcurveTo":e+="Q".concat(h[0]," ").concat(h[1],", ").concat(h[2]," ").concat(h[3]," ");break;case"lineTo":e+="L".concat(h[0]," ").concat(h[1]," ")}}}catch(l){n=!0,i=l}finally{try{a||null==r.return||r.return()}finally{if(n)throw i}}return e.trim()}}]),e}();function a(t,e){return t.type===e}var n={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:4,t:2,V:1,v:1,Z:0,z:0},i=function(){function t(e){Object(l["a"])(this,t),this.COMMAND=0,this.NUMBER=1,this.EOD=2,this.segments=[],this.parseData(e),this.processPoints()}return Object(c["a"])(t,[{key:"tokenize",value:function(t){for(var e=new Array;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:this.COMMAND,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return console.error("Unrecognized segment command: "+t),[];e[e.length]={type:this.NUMBER,text:"".concat(parseFloat(RegExp.$1))},t=t.substr(RegExp.$1.length)}return e[e.length]={type:this.EOD,text:""},e}},{key:"parseData",value:function(t){var e=this.tokenize(t),i=0,s=e[i],r="BOD";for(this.segments=new Array;!a(s,this.EOD);){var o=void 0,h=new Array;if("BOD"===r){if("M"!==s.text&&"m"!==s.text)return void this.parseData("M0,0"+t);i++,o=n[s.text],r=s.text}else a(s,this.NUMBER)?o=n[r]:(i++,o=n[s.text],r=s.text);if(i+o<e.length){for(var l=i;l<i+o;l++){var c=e[l];if(!a(c,this.NUMBER))return void console.error("Parameter type is not a number: "+r+","+c.text);h[h.length]=+c.text}if("number"!=typeof n[r])return void console.error("Unsupported segment type: "+r);var u={key:r,data:h};this.segments.push(u),s=e[i+=o],"M"===r&&(r="L"),"m"===r&&(r="l")}else console.error("Path data ended before all parameters were found")}}},{key:"processPoints",value:function(){for(var t=null,e=[0,0],a=0;a<this.segments.length;a++){var n=this.segments[a];switch(n.key){case"M":case"L":case"T":n.point=[n.data[0],n.data[1]];break;case"m":case"l":case"t":n.point=[n.data[0]+e[0],n.data[1]+e[1]];break;case"H":n.point=[n.data[0],e[1]];break;case"h":n.point=[n.data[0]+e[0],e[1]];break;case"V":n.point=[e[0],n.data[0]];break;case"v":n.point=[e[0],n.data[0]+e[1]];break;case"z":case"Z":t&&(n.point=[t[0],t[1]]);break;case"C":n.point=[n.data[4],n.data[5]];break;case"c":n.point=[n.data[4]+e[0],n.data[5]+e[1]];break;case"S":n.point=[n.data[2],n.data[3]];break;case"s":n.point=[n.data[2]+e[0],n.data[3]+e[1]];break;case"Q":n.point=[n.data[2],n.data[3]];break;case"q":n.point=[n.data[2]+e[0],n.data[3]+e[1]];break;case"A":n.point=[n.data[5],n.data[6]];break;case"a":n.point=[n.data[5]+e[0],n.data[6]+e[1]]}"m"!==n.key&&"M"!==n.key||(t=null),n.point&&(e=n.point,t||(t=n.point)),"z"!==n.key&&"Z"!==n.key||(t=null)}}},{key:"closed",get:function(){if(void 0===this._closed){this._closed=!1;var t=!0,e=!1,a=void 0;try{for(var n,i=this.segments[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var s=n.value;"z"===s.key.toLowerCase()&&(this._closed=!0)}}catch(r){e=!0,a=r}finally{try{t||null==i.return||i.return()}finally{if(e)throw a}}}return this._closed}}]),t}(),s=function(){function t(e){Object(l["a"])(this,t),this._position=[0,0],this._first=null,this.bezierReflectionPoint=null,this.quadReflectionPoint=null,this.parsed=new i(e)}return Object(c["a"])(t,[{key:"setPosition",value:function(t,e){this._position=[t,e],this._first||(this._first=[t,e])}},{key:"segments",get:function(){return this.parsed.segments}},{key:"closed",get:function(){return this.parsed.closed}},{key:"linearPoints",get:function(){if(!this._linearPoints){var t=[],e=[],a=!0,n=!1,i=void 0;try{for(var s,r=this.parsed.segments[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var o=s.value,h=o.key.toLowerCase();("m"!==h&&"z"!==h||(e.length&&(t.push(e),e=[]),"z"!==h))&&o.point&&e.push(o.point)}}catch(l){n=!0,i=l}finally{try{a||null==r.return||r.return()}finally{if(n)throw i}}e.length&&(t.push(e),e=[]),this._linearPoints=t}return this._linearPoints}},{key:"first",get:function(){return this._first},set:function(t){this._first=t}},{key:"position",get:function(){return this._position}},{key:"x",get:function(){return this._position[0]}},{key:"y",get:function(){return this._position[1]}}]),t}(),r=function(){function t(e,a,n,i,s,r){if(Object(l["a"])(this,t),this._segIndex=0,this._numSegs=0,this._rx=0,this._ry=0,this._sinPhi=0,this._cosPhi=0,this._C=[0,0],this._theta=0,this._delta=0,this._T=0,this._from=e,e[0]!==a[0]||e[1]!==a[1]){var o=Math.PI/180;this._rx=Math.abs(n[0]),this._ry=Math.abs(n[1]),this._sinPhi=Math.sin(i*o),this._cosPhi=Math.cos(i*o);var h=this._cosPhi*(e[0]-a[0])/2+this._sinPhi*(e[1]-a[1])/2,c=-this._sinPhi*(e[0]-a[0])/2+this._cosPhi*(e[1]-a[1])/2,u=0,f=this._rx*this._rx*this._ry*this._ry-this._rx*this._rx*c*c-this._ry*this._ry*h*h;if(f<0){var p=Math.sqrt(1-f/(this._rx*this._rx*this._ry*this._ry));this._rx=this._rx*p,this._ry=this._ry*p,u=0}else u=(s===r?-1:1)*Math.sqrt(f/(this._rx*this._rx*c*c+this._ry*this._ry*h*h));var d=u*this._rx*c/this._ry,v=-u*this._ry*h/this._rx;this._C=[0,0],this._C[0]=this._cosPhi*d-this._sinPhi*v+(e[0]+a[0])/2,this._C[1]=this._sinPhi*d+this._cosPhi*v+(e[1]+a[1])/2,this._theta=this.calculateVectorAngle(1,0,(h-d)/this._rx,(c-v)/this._ry);var g=this.calculateVectorAngle((h-d)/this._rx,(c-v)/this._ry,(-h-d)/this._rx,(-c-v)/this._ry);!r&&g>0?g-=2*Math.PI:r&&g<0&&(g+=2*Math.PI),this._numSegs=Math.ceil(Math.abs(g/(Math.PI/2))),this._delta=g/this._numSegs,this._T=8/3*Math.sin(this._delta/4)*Math.sin(this._delta/4)/Math.sin(this._delta/2)}}return Object(c["a"])(t,[{key:"getNextSegment",value:function(){if(this._segIndex===this._numSegs)return null;var t=Math.cos(this._theta),e=Math.sin(this._theta),a=this._theta+this._delta,n=Math.cos(a),i=Math.sin(a),s=[this._cosPhi*this._rx*n-this._sinPhi*this._ry*i+this._C[0],this._sinPhi*this._rx*n+this._cosPhi*this._ry*i+this._C[1]],r=[this._from[0]+this._T*(-this._cosPhi*this._rx*e-this._sinPhi*this._ry*t),this._from[1]+this._T*(-this._sinPhi*this._rx*e+this._cosPhi*this._ry*t)],o=[s[0]+this._T*(this._cosPhi*this._rx*i+this._sinPhi*this._ry*n),s[1]+this._T*(this._sinPhi*this._rx*i-this._cosPhi*this._ry*n)];return this._theta=a,this._from=[s[0],s[1]],this._segIndex++,{cp1:r,cp2:o,to:s}}},{key:"calculateVectorAngle",value:function(t,e,a,n){var i=Math.atan2(e,t),s=Math.atan2(n,a);return s>=i?s-i:2*Math.PI-(i-s)}}]),t}(),o=function(){function t(e,a){Object(l["a"])(this,t),this.sets=e,this.closed=a}return Object(c["a"])(t,[{key:"fit",value:function(t){var e=[],a=!0,n=!1,i=void 0;try{for(var s,r=this.sets[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var o=s.value,h=o.length,l=Math.floor(t*h);if(l<5){if(h<=5)continue;l=5}e.push(this.reduce(o,l))}}catch(g){n=!0,i=g}finally{try{a||null==r.return||r.return()}finally{if(n)throw i}}for(var c="",u=0,f=e;u<f.length;u++){for(var p=f[u],d=0;d<p.length;d++){var v=p[d];c+=0===d?"M"+v[0]+","+v[1]:"L"+v[0]+","+v[1]}this.closed&&(c+="z ")}return c}},{key:"distance",value:function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}},{key:"reduce",value:function(t,e){if(t.length<=e)return t;for(var a=t.slice(0);a.length>e;){for(var n=-1,i=-1,s=1;s<a.length-1;s++){var r=this.distance(a[s-1],a[s]),o=this.distance(a[s],a[s+1]),h=this.distance(a[s-1],a[s+1]),l=(r+o+h)/2,c=Math.sqrt(l*(l-r)*(l-o)*(l-h));(n<0||c<n)&&(n=c,i=s)}if(!(i>0))break;a.splice(i,1)}return a}}]),t}(),h=function(){function t(e,a){Object(l["a"])(this,t),this.xi=Number.MAX_VALUE,this.yi=Number.MAX_VALUE,this.px1=e[0],this.py1=e[1],this.px2=a[0],this.py2=a[1],this.a=this.py2-this.py1,this.b=this.px1-this.px2,this.c=this.px2*this.py1-this.px1*this.py2,this._undefined=0===this.a&&0===this.b&&0===this.c}return Object(c["a"])(t,[{key:"isUndefined",value:function(){return this._undefined}},{key:"intersects",value:function(t){if(this.isUndefined()||t.isUndefined())return!1;var e=Number.MAX_VALUE,a=Number.MAX_VALUE,n=0,i=0,s=this.a,r=this.b,o=this.c;return Math.abs(r)>1e-5&&(e=-s/r,n=-o/r),Math.abs(t.b)>1e-5&&(a=-t.a/t.b,i=-t.c/t.b),e===Number.MAX_VALUE?a===Number.MAX_VALUE?-o/s==-t.c/t.a&&(this.py1>=Math.min(t.py1,t.py2)&&this.py1<=Math.max(t.py1,t.py2)?(this.xi=this.px1,this.yi=this.py1,!0):this.py2>=Math.min(t.py1,t.py2)&&this.py2<=Math.max(t.py1,t.py2)&&(this.xi=this.px2,this.yi=this.py2,!0)):(this.xi=this.px1,this.yi=a*this.xi+i,!((this.py1-this.yi)*(this.yi-this.py2)<-1e-5||(t.py1-this.yi)*(this.yi-t.py2)<-1e-5)&&(!(Math.abs(t.a)<1e-5)||!((t.px1-this.xi)*(this.xi-t.px2)<-1e-5))):a===Number.MAX_VALUE?(this.xi=t.px1,this.yi=e*this.xi+n,!((t.py1-this.yi)*(this.yi-t.py2)<-1e-5||(this.py1-this.yi)*(this.yi-this.py2)<-1e-5)&&(!(Math.abs(s)<1e-5)||!((this.px1-this.xi)*(this.xi-this.px2)<-1e-5))):e===a?n===i&&(this.px1>=Math.min(t.px1,t.px2)&&this.px1<=Math.max(t.py1,t.py2)?(this.xi=this.px1,this.yi=this.py1,!0):this.px2>=Math.min(t.px1,t.px2)&&this.px2<=Math.max(t.px1,t.px2)&&(this.xi=this.px2,this.yi=this.py2,!0)):(this.xi=(i-n)/(e-a),this.yi=e*this.xi+n,!((this.px1-this.xi)*(this.xi-this.px2)<-1e-5||(t.px1-this.xi)*(this.xi-t.px2)<-1e-5))}}]),t}();function u(t,e){var a=t[1][1]-t[0][1],n=t[0][0]-t[1][0],i=a*t[0][0]+n*t[0][1],s=e[1][1]-e[0][1],r=e[0][0]-e[1][0],o=s*e[0][0]+r*e[0][1],h=a*r-s*n;return h?[Math.round((r*i-n*o)/h),Math.round((a*o-s*i)/h)]:null}var f=function(){function t(e,a,n,i,s,r,o,c){Object(l["a"])(this,t),this.deltaX=0,this.hGap=0,this.top=e,this.bottom=a,this.left=n,this.right=i,this.gap=s,this.sinAngle=r,this.tanAngle=c,Math.abs(r)<1e-4?this.pos=n+s:Math.abs(r)>.9999?this.pos=e+s:(this.deltaX=(a-e)*Math.abs(c),this.pos=n-Math.abs(this.deltaX),this.hGap=Math.abs(s/o),this.sLeft=new h([n,a],[n,e]),this.sRight=new h([i,a],[i,e]))}return Object(c["a"])(t,[{key:"nextLine",value:function(){if(Math.abs(this.sinAngle)<1e-4){if(this.pos<this.right){var t=[this.pos,this.top,this.pos,this.bottom];return this.pos+=this.gap,t}}else if(Math.abs(this.sinAngle)>.9999){if(this.pos<this.bottom){var e=[this.left,this.pos,this.right,this.pos];return this.pos+=this.gap,e}}else{var a=this.pos-this.deltaX/2,n=this.pos+this.deltaX/2,i=this.bottom,s=this.top;if(this.pos<this.right+this.deltaX){for(;a<this.left&&n<this.left||a>this.right&&n>this.right;)if(this.pos+=this.hGap,a=this.pos-this.deltaX/2,n=this.pos+this.deltaX/2,this.pos>this.right+this.deltaX)return null;var r=new h([a,i],[n,s]);this.sLeft&&r.intersects(this.sLeft)&&(a=r.xi,i=r.yi),this.sRight&&r.intersects(this.sRight)&&(n=r.xi,s=r.yi),this.tanAngle>0&&(a=this.right-(a-this.left),n=this.right-(n-this.left));var o=[a,i,n,s];return this.pos+=this.hGap,o}}return null}}]),t}();function p(t){var e=t[0],a=t[1];return Math.sqrt(Math.pow(e[0]-a[0],2)+Math.pow(e[1]-a[1],2))}function d(t,e){for(var a=[],n=new h([t[0],t[1]],[t[2],t[3]]),i=0;i<e.length;i++){var s=new h(e[i],e[(i+1)%e.length]);n.intersects(s)&&a.push([n.xi,n.yi])}return a}function v(t,e,a,n,i,s,r){return[-a*s-n*i+a+s*t+i*e,r*(a*i-n*s)+n+-r*i*t+r*s*e]}function g(t,e){var a=[];if(t&&t.length){for(var n=t[0][0],i=t[0][0],s=t[0][1],r=t[0][1],o=1;o<t.length;o++)n=Math.min(n,t[o][0]),i=Math.max(i,t[o][0]),s=Math.min(s,t[o][1]),r=Math.max(r,t[o][1]);var h=e.hachureAngle,l=e.hachureGap;l<0&&(l=4*e.strokeWidth),l=Math.max(l,.1);for(var c,u=h%180*(Math.PI/180),p=Math.cos(u),v=Math.sin(u),g=Math.tan(u),y=new f(s-1,r+1,n-1,i+1,l,v,p,g);null!=(c=y.nextLine());)for(var b=d(c,t),m=0;m<b.length;m++)if(m<b.length-1){var k=b[m],M=b[m+1];a.push([k,M])}}return a}function y(t,e,a,n,i,s){var r=[],o=Math.abs(n/2),h=Math.abs(i/2);o+=t.randOffset(.05*o,s),h+=t.randOffset(.05*h,s);var l=s.hachureAngle,c=s.hachureGap;c<=0&&(c=4*s.strokeWidth);var u=s.fillWeight;u<0&&(u=s.strokeWidth/2);for(var f=l%180*(Math.PI/180),p=Math.tan(f),d=h/o,g=Math.sqrt(d*p*d*p+1),y=d*p/g,b=1/g,m=c/(o*h/Math.sqrt(h*b*(h*b)+o*y*(o*y))/o),k=Math.sqrt(o*o-(e-o+m)*(e-o+m)),M=e-o+m;M<e+o;M+=m){var _=v(M,a-(k=Math.sqrt(o*o-(e-M)*(e-M))),e,a,y,b,d),x=v(M,a+k,e,a,y,b,d);r.push([_,x])}return r}var b=function(){function t(e){Object(l["a"])(this,t),this.helper=e}return Object(c["a"])(t,[{key:"fillPolygon",value:function(t,e){return this._fillPolygon(t,e)}},{key:"fillEllipse",value:function(t,e,a,n,i){return this._fillEllipse(t,e,a,n,i)}},{key:"fillArc",value:function(t,e,a,n,i,s,r){return null}},{key:"_fillPolygon",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=g(t,e);return{type:"fillSketch",ops:this.renderLines(n,e,a)}}},{key:"_fillEllipse",value:function(t,e,a,n,i){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=y(this.helper,t,e,a,n,i);return{type:"fillSketch",ops:this.renderLines(r,i,s)}}},{key:"renderLines",value:function(t,e,a){var n=[],i=null,s=!0,r=!1,o=void 0;try{for(var h,l=t[Symbol.iterator]();!(s=(h=l.next()).done);s=!0){var c=h.value;n=n.concat(this.helper.doubleLineOps(c[0][0],c[0][1],c[1][0],c[1][1],e)),a&&i&&(n=n.concat(this.helper.doubleLineOps(i[0],i[1],c[0][0],c[0][1],e))),i=c[1]}}catch(u){r=!0,o=u}finally{try{s||null==l.return||l.return()}finally{if(r)throw o}}return n}}]),t}(),m=function(t){function e(){return Object(l["a"])(this,e),Object(A["a"])(this,Object(E["a"])(e).apply(this,arguments))}return Object(C["a"])(e,t),Object(c["a"])(e,[{key:"fillPolygon",value:function(t,e){return this._fillPolygon(t,e,!0)}},{key:"fillEllipse",value:function(t,e,a,n,i){return this._fillEllipse(t,e,a,n,i,!0)}}]),e}(b),k=function(t){function e(){return Object(l["a"])(this,e),Object(A["a"])(this,Object(E["a"])(e).apply(this,arguments))}return Object(C["a"])(e,t),Object(c["a"])(e,[{key:"fillPolygon",value:function(t,e){var a=this._fillPolygon(t,e),n=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),i=this._fillPolygon(t,n);return a.ops=a.ops.concat(i.ops),a}},{key:"fillEllipse",value:function(t,e,a,n,i){var s=this._fillEllipse(t,e,a,n,i),r=Object.assign({},i,{hachureAngle:i.hachureAngle+90}),o=this._fillEllipse(t,e,a,n,r);return s.ops=s.ops.concat(o.ops),s}}]),e}(b),M=function(){function t(e){Object(l["a"])(this,t),this.helper=e}return Object(c["a"])(t,[{key:"fillPolygon",value:function(t,e){var a=g(t,e=Object.assign({},e,{curveStepCount:4,hachureAngle:0}));return this.dotsOnLines(a,e)}},{key:"fillEllipse",value:function(t,e,a,n,i){i=Object.assign({},i,{curveStepCount:4,hachureAngle:0});var s=y(this.helper,t,e,a,n,i);return this.dotsOnLines(s,i)}},{key:"fillArc",value:function(t,e,a,n,i,s,r){return null}},{key:"dotsOnLines",value:function(t,e){var a=[],n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.max(n,.1);var i=e.fillWeight;i<0&&(i=e.strokeWidth/2);var s=!0,r=!1,o=void 0;try{for(var h,l=t[Symbol.iterator]();!(s=(h=l.next()).done);s=!0)for(var c=h.value,u=p(c)/n,f=Math.ceil(u)-1,d=Math.atan((c[1][1]-c[0][1])/(c[1][0]-c[0][0])),v=0;v<f;v++){var g=n*(v+1),y=g*Math.sin(d),b=g*Math.cos(d),m=[c[0][0]-b,c[0][1]+y],k=this.helper.randOffsetWithRange(m[0]-n/4,m[0]+n/4,e),M=this.helper.randOffsetWithRange(m[1]-n/4,m[1]+n/4,e),_=this.helper.ellipse(k,M,i,i,e);a=a.concat(_.ops)}}catch(x){r=!0,o=x}finally{try{s||null==l.return||l.return()}finally{if(r)throw o}}return{type:"fillSketch",ops:a}}}]),t}(),_=function(){function t(e){Object(l["a"])(this,t),this.helper=e}return Object(c["a"])(t,[{key:"fillPolygon",value:function(t,e){var a=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER],n=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER];t.forEach(function(t){a[0]=Math.min(a[0],t[0]),a[1]=Math.max(a[1],t[0]),n[0]=Math.min(n[0],t[1]),n[1]=Math.max(n[1],t[1])});var i=function(t){for(var e=0,a=0,n=0,i=0;i<t.length;i++){var s=t[i],r=i===t.length-1?t[0]:t[i+1];e+=s[0]*r[1]-r[0]*s[1]}e/=2;for(var o=0;o<t.length;o++){var h=t[o],l=o===t.length-1?t[0]:t[o+1];a+=(h[0]+l[0])*(h[0]*l[1]-l[0]*h[1]),n+=(h[1]+l[1])*(h[0]*l[1]-l[0]*h[1])}return[a/(6*e),n/(6*e)]}(t),s=Math.max(Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-n[0],2)),Math.sqrt(Math.pow(i[0]-a[1],2)+Math.pow(i[1]-n[1],2))),r=e.hachureGap>0?e.hachureGap:4*e.strokeWidth,o=[];if(t.length>2)for(var h=0;h<t.length;h++)h===t.length-1?o.push([t[h],t[0]]):o.push([t[h],t[h+1]]);for(var l=[],c=Math.max(1,Math.PI*s/r),f=function(t){var e=t*Math.PI/c,r=[i,[i[0]+s*Math.cos(e),i[1]+s*Math.sin(e)]];o.forEach(function(t){var e=u(t,r);e&&e[0]>=a[0]&&e[0]<=a[1]&&e[1]>=n[0]&&e[1]<=n[1]&&l.push(e)})},p=0;p<c;p++)f(p);l=this.removeDuplocatePoints(l);var d=this.createLinesFromCenter(i,l);return{type:"fillSketch",ops:this.drawLines(d,e)}}},{key:"fillEllipse",value:function(t,e,a,n,i){return this.fillArcSegment(t,e,a,n,0,2*Math.PI,i)}},{key:"fillArc",value:function(t,e,a,n,i,s,r){return this.fillArcSegment(t,e,a,n,i,s,r)}},{key:"fillArcSegment",value:function(t,e,a,n,i,s,r){var o=[t,e],h=a/2,l=n/2,c=Math.max(a/2,n/2),u=r.hachureGap;u<0&&(u=4*r.strokeWidth);for(var f=Math.max(1,Math.abs(s-i)*c/u),p=[],d=0;d<f;d++){var v=d*((s-i)/f)+i,g=c*Math.cos(v),y=c*Math.sin(v),b=Math.sqrt(h*h*y*y+l*l*g*g),m=h*l*g/b,k=h*l*y/b;p.push([o[0]+m,o[1]+k])}p=this.removeDuplocatePoints(p);var M=this.createLinesFromCenter(o,p);return{type:"fillSketch",ops:this.drawLines(M,r)}}},{key:"drawLines",value:function(t,e){var a=this,n=[];return t.forEach(function(t){var i=t[0],s=t[1];n=n.concat(a.helper.doubleLineOps(i[0],i[1],s[0],s[1],e))}),n}},{key:"createLinesFromCenter",value:function(t,e){return e.map(function(e){return[t,e]})}},{key:"removeDuplocatePoints",value:function(t){var e=new Set;return t.filter(function(t){var a=t.join(",");return!e.has(a)&&(e.add(a),!0)})}}]),t}(),x=function(){function t(e){Object(l["a"])(this,t),this.helper=e}return Object(c["a"])(t,[{key:"fillPolygon",value:function(t,e){var a=g(t,e);return{type:"fillSketch",ops:this.dashedLine(a,e)}}},{key:"fillEllipse",value:function(t,e,a,n,i){var s=y(this.helper,t,e,a,n,i);return{type:"fillSketch",ops:this.dashedLine(s,i)}}},{key:"fillArc",value:function(t,e,a,n,i,s,r){return null}},{key:"dashedLine",value:function(t,e){var a=this,n=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,i=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,s=[];return t.forEach(function(t){var r=p(t),o=Math.floor(r/(n+i)),h=(r+i-o*(n+i))/2,l=t[0],c=t[1];l[0]>c[0]&&(l=t[1],c=t[0]);for(var u=Math.atan((c[1]-l[1])/(c[0]-l[0])),f=0;f<o;f++){var d=f*(n+i),v=d+n,g=[l[0]+d*Math.cos(u)+h*Math.cos(u),l[1]+d*Math.sin(u)+h*Math.sin(u)],y=[l[0]+v*Math.cos(u)+h*Math.cos(u),l[1]+v*Math.sin(u)+h*Math.sin(u)];s=s.concat(a.helper.doubleLineOps(g[0],g[1],y[0],y[1],e))}}),s}}]),t}(),w=function(){function t(e){Object(l["a"])(this,t),this.helper=e}return Object(c["a"])(t,[{key:"fillPolygon",value:function(t,e){var a=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,n=e.zigzagOffset<0?a:e.zigzagOffset,i=g(t,e=Object.assign({},e,{hachureGap:a+n}));return{type:"fillSketch",ops:this.zigzagLines(i,n,e)}}},{key:"fillEllipse",value:function(t,e,a,n,i){var s=i.hachureGap<0?4*i.strokeWidth:i.hachureGap,r=i.zigzagOffset<0?s:i.zigzagOffset;i=Object.assign({},i,{hachureGap:s+r});var o=y(this.helper,t,e,a,n,i);return{type:"fillSketch",ops:this.zigzagLines(o,r,i)}}},{key:"fillArc",value:function(t,e,a,n,i,s,r){return null}},{key:"zigzagLines",value:function(t,e,a){var n=this,i=[];return t.forEach(function(t){var s=p(t),r=Math.round(s/(2*e)),o=t[0],h=t[1];o[0]>h[0]&&(o=t[1],h=t[0]);for(var l=Math.atan((h[1]-o[1])/(h[0]-o[0])),c=0;c<r;c++){var u=2*c*e,f=2*(c+1)*e,d=Math.sqrt(2*Math.pow(e,2)),v=[o[0]+u*Math.cos(l),o[1]+u*Math.sin(l)],g=[o[0]+f*Math.cos(l),o[1]+f*Math.sin(l)],y=[v[0]+d*Math.cos(l+Math.PI/4),v[1]+d*Math.sin(l+Math.PI/4)];i=(i=i.concat(n.helper.doubleLineOps(v[0],v[1],y[0],y[1],a))).concat(n.helper.doubleLineOps(y[0],y[1],g[0],g[1],a))}}),i}}]),t}(),P={};function O(t,e){var a=t.fillStyle||"hachure";if(!P[a])switch(a){case"zigzag":P[a]||(P[a]=new m(e));break;case"cross-hatch":P[a]||(P[a]=new k(e));break;case"dots":P[a]||(P[a]=new M(e));break;case"starburst":P[a]||(P[a]=new _(e));break;case"dashed":P[a]||(P[a]=new x(e));break;case"zigzag-line":P[a]||(P[a]=new w(e));break;case"hachure":default:P[a="hachure"]||(P[a]=new b(e))}return P[a]}var S={randOffset:function(t,e){return G(t,e)},randOffsetWithRange:function(t,e,a){return q(t,e,a)},ellipse:D,doubleLineOps:function(t,e,a,n,i){return U(t,e,a,n,i)}};function j(t,e,a,n,i){return{type:"path",ops:U(t,e,a,n,i)}}function T(t,e,a){var n=(t||[]).length;if(n>2){for(var i=[],s=0;s<n-1;s++)i=i.concat(U(t[s][0],t[s][1],t[s+1][0],t[s+1][1],a));return e&&(i=i.concat(U(t[n-1][0],t[n-1][1],t[0][0],t[0][1],a))),{type:"path",ops:i}}return 2===n?j(t[0][0],t[0][1],t[1][0],t[1][1],a):{type:"path",ops:[]}}function I(t,e,a,n,i){return function(t,e){return T(t,!0,e)}([[t,e],[t+a,e],[t+a,e+n],[t,e+n]],i)}function z(t,e){var a=F(t,1*(1+.2*e.roughness),e),n=F(t,1.5*(1+.22*e.roughness),e);return{type:"path",ops:a.concat(n)}}function D(t,e,a,n,i){var s=2*Math.PI/i.curveStepCount,r=Math.abs(a/2),o=Math.abs(n/2),h=X(s,t,e,r+=G(.05*r,i),o+=G(.05*o,i),1,s*q(.1,q(.4,1,i),i),i),l=X(s,t,e,r,o,1.5,0,i);return{type:"path",ops:h.concat(l)}}function N(t,e,a,n,i,s,r,o,h){var l=t,c=e,u=Math.abs(a/2),f=Math.abs(n/2);u+=G(.01*u,h),f+=G(.01*f,h);for(var p=i,d=s;p<0;)p+=2*Math.PI,d+=2*Math.PI;d-p>2*Math.PI&&(p=0,d=2*Math.PI);var v=2*Math.PI/h.curveStepCount,g=Math.min(v/2,(d-p)/2),y=$(g,l,c,u,f,p,d,1,h),b=$(g,l,c,u,f,p,d,1.5,h),m=y.concat(b);return r&&(o?m=(m=m.concat(U(l,c,l+u*Math.cos(p),c+f*Math.sin(p),h))).concat(U(l,c,l+u*Math.cos(d),c+f*Math.sin(d),h)):(m.push({op:"lineTo",data:[l,c]}),m.push({op:"lineTo",data:[l+u*Math.cos(p),c+f*Math.sin(p)]}))),{type:"path",ops:m}}function W(t,e){var a=[];if(t.length){var n=e.maxRandomnessOffset||0,i=t.length;if(i>2){a.push({op:"move",data:[t[0][0]+G(n,e),t[0][1]+G(n,e)]});for(var s=1;s<i;s++)a.push({op:"lineTo",data:[t[s][0]+G(n,e),t[s][1]+G(n,e)]})}}return{type:"fillPath",ops:a}}function R(t,e){return O(e,S).fillPolygon(t,e)}function q(t,e,a){return a.roughness*(Math.random()*(e-t)+t)}function G(t,e){return q(-t,t,e)}function U(t,e,a,n,i){var s=B(t,e,a,n,i,!0,!1),r=B(t,e,a,n,i,!0,!0);return s.concat(r)}function B(t,e,a,n,i,s,r){var o=Math.pow(t-a,2)+Math.pow(e-n,2),h=i.maxRandomnessOffset||0;h*h*100>o&&(h=Math.sqrt(o)/10);var l=h/2,c=.2+.2*Math.random(),u=i.bowing*i.maxRandomnessOffset*(n-e)/200,f=i.bowing*i.maxRandomnessOffset*(t-a)/200;u=G(u,i),f=G(f,i);var p=[],d=function(){return G(l,i)},v=function(){return G(h,i)};return s&&(r?p.push({op:"move",data:[t+d(),e+d()]}):p.push({op:"move",data:[t+G(h,i),e+G(h,i)]})),r?p.push({op:"bcurveTo",data:[u+t+(a-t)*c+d(),f+e+(n-e)*c+d(),u+t+2*(a-t)*c+d(),f+e+2*(n-e)*c+d(),a+d(),n+d()]}):p.push({op:"bcurveTo",data:[u+t+(a-t)*c+v(),f+e+(n-e)*c+v(),u+t+2*(a-t)*c+v(),f+e+2*(n-e)*c+v(),a+v(),n+v()]}),p}function F(t,e,a){var n=[];n.push([t[0][0]+G(e,a),t[0][1]+G(e,a)]),n.push([t[0][0]+G(e,a),t[0][1]+G(e,a)]);for(var i=1;i<t.length;i++)n.push([t[i][0]+G(e,a),t[i][1]+G(e,a)]),i===t.length-1&&n.push([t[i][0]+G(e,a),t[i][1]+G(e,a)]);return V(n,null,a)}function V(t,e,a){var n=t.length,i=[];if(n>3){var s=[],r=1-a.curveTightness;i.push({op:"move",data:[t[1][0],t[1][1]]});for(var o=1;o+2<n;o++){var h=t[o];s[0]=[h[0],h[1]],s[1]=[h[0]+(r*t[o+1][0]-r*t[o-1][0])/6,h[1]+(r*t[o+1][1]-r*t[o-1][1])/6],s[2]=[t[o+1][0]+(r*t[o][0]-r*t[o+2][0])/6,t[o+1][1]+(r*t[o][1]-r*t[o+2][1])/6],s[3]=[t[o+1][0],t[o+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}if(e&&2===e.length){var l=a.maxRandomnessOffset;i.push({op:"lineTo",data:[e[0]+G(l,a),e[1]+G(l,a)]})}}else 3===n?(i.push({op:"move",data:[t[1][0],t[1][1]]}),i.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===n&&(i=i.concat(U(t[0][0],t[0][1],t[1][0],t[1][1],a)));return i}function X(t,e,a,n,i,s,r,o){var h=G(.5,o)-Math.PI/2,l=[];l.push([G(s,o)+e+.9*n*Math.cos(h-t),G(s,o)+a+.9*i*Math.sin(h-t)]);for(var c=h;c<2*Math.PI+h-.01;c+=t)l.push([G(s,o)+e+n*Math.cos(c),G(s,o)+a+i*Math.sin(c)]);return l.push([G(s,o)+e+n*Math.cos(h+2*Math.PI+.5*r),G(s,o)+a+i*Math.sin(h+2*Math.PI+.5*r)]),l.push([G(s,o)+e+.98*n*Math.cos(h+r),G(s,o)+a+.98*i*Math.sin(h+r)]),l.push([G(s,o)+e+.9*n*Math.cos(h+.5*r),G(s,o)+a+.9*i*Math.sin(h+.5*r)]),V(l,null,o)}function $(t,e,a,n,i,s,r,o,h){var l=s+G(.1,h),c=[];c.push([G(o,h)+e+.9*n*Math.cos(l-t),G(o,h)+a+.9*i*Math.sin(l-t)]);for(var u=l;u<=r;u+=t)c.push([G(o,h)+e+n*Math.cos(u),G(o,h)+a+i*Math.sin(u)]);return c.push([e+n*Math.cos(r),a+i*Math.sin(r)]),c.push([e+n*Math.cos(r),a+i*Math.sin(r)]),V(c,null,h)}function H(t,e,a,n,i,s,r,o){for(var h=[],l=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.5],c=[0,0],u=0;u<2;u++)0===u?h.push({op:"move",data:[r.x,r.y]}):h.push({op:"move",data:[r.x+G(l[0],o),r.y+G(l[0],o)]}),c=[i+G(l[u],o),s+G(l[u],o)],h.push({op:"bcurveTo",data:[t+G(l[u],o),e+G(l[u],o),a+G(l[u],o),n+G(l[u],o),c[0],c[1]]});return r.setPosition(c[0],c[1]),h}function Q(t,e,a,n){var i=[];switch(e.key){case"M":case"m":var s="m"===e.key;if(e.data.length>=2){var o=+e.data[0],h=+e.data[1];s&&(o+=t.x,h+=t.y);var l=1*(n.maxRandomnessOffset||0);o+=G(l,n),h+=G(l,n),t.setPosition(o,h),i.push({op:"move",data:[o,h]})}break;case"L":case"l":var c="l"===e.key;if(e.data.length>=2){var u=+e.data[0],f=+e.data[1];c&&(u+=t.x,f+=t.y),i=i.concat(U(t.x,t.y,u,f,n)),t.setPosition(u,f)}break;case"H":case"h":var p="h"===e.key;if(e.data.length){var d=+e.data[0];p&&(d+=t.x),i=i.concat(U(t.x,t.y,d,t.y,n)),t.setPosition(d,t.y)}break;case"V":case"v":var v="v"===e.key;if(e.data.length){var g=+e.data[0];v&&(g+=t.y),i=i.concat(U(t.x,t.y,t.x,g,n)),t.setPosition(t.x,g)}break;case"Z":case"z":t.first&&(i=i.concat(U(t.x,t.y,t.first[0],t.first[1],n)),t.setPosition(t.first[0],t.first[1]),t.first=null);break;case"C":case"c":var y="c"===e.key;if(e.data.length>=6){var b=+e.data[0],m=+e.data[1],k=+e.data[2],M=+e.data[3],_=+e.data[4],x=+e.data[5];y&&(b+=t.x,k+=t.x,_+=t.x,m+=t.y,M+=t.y,x+=t.y);var w=H(b,m,k,M,_,x,t,n);i=i.concat(w),t.bezierReflectionPoint=[_+(_-k),x+(x-M)]}break;case"S":case"s":var P="s"===e.key;if(e.data.length>=4){var O=+e.data[0],S=+e.data[1],j=+e.data[2],A=+e.data[3];P&&(O+=t.x,j+=t.x,S+=t.y,A+=t.y);var E=O,C=S,L=a?a.key:"",T=null;"c"!==L&&"C"!==L&&"s"!==L&&"S"!==L||(T=t.bezierReflectionPoint),T&&(E=T[0],C=T[1]);var I=H(E,C,O,S,j,A,t,n);i=i.concat(I),t.bezierReflectionPoint=[j+(j-O),A+(A-S)]}break;case"Q":case"q":var z="q"===e.key;if(e.data.length>=4){var D=+e.data[0],N=+e.data[1],W=+e.data[2],R=+e.data[3];z&&(D+=t.x,W+=t.x,N+=t.y,R+=t.y);var q=1*(1+.2*n.roughness),B=1.5*(1+.22*n.roughness);i.push({op:"move",data:[t.x+G(q,n),t.y+G(q,n)]});var F=[W+G(q,n),R+G(q,n)];i.push({op:"qcurveTo",data:[D+G(q,n),N+G(q,n),F[0],F[1]]}),i.push({op:"move",data:[t.x+G(B,n),t.y+G(B,n)]}),F=[W+G(B,n),R+G(B,n)],i.push({op:"qcurveTo",data:[D+G(B,n),N+G(B,n),F[0],F[1]]}),t.setPosition(F[0],F[1]),t.quadReflectionPoint=[W+(W-D),R+(R-N)]}break;case"T":case"t":var V="t"===e.key;if(e.data.length>=2){var X=+e.data[0],$=+e.data[1];V&&(X+=t.x,$+=t.y);var Q=X,Z=$,J=a?a.key:"",Y=null;"q"!==J&&"Q"!==J&&"t"!==J&&"T"!==J||(Y=t.quadReflectionPoint),Y&&(Q=Y[0],Z=Y[1]);var K=1*(1+.2*n.roughness),tt=1.5*(1+.22*n.roughness);i.push({op:"move",data:[t.x+G(K,n),t.y+G(K,n)]});var et=[X+G(K,n),$+G(K,n)];i.push({op:"qcurveTo",data:[Q+G(K,n),Z+G(K,n),et[0],et[1]]}),i.push({op:"move",data:[t.x+G(tt,n),t.y+G(tt,n)]}),et=[X+G(tt,n),$+G(tt,n)],i.push({op:"qcurveTo",data:[Q+G(tt,n),Z+G(tt,n),et[0],et[1]]}),t.setPosition(et[0],et[1]),t.quadReflectionPoint=[X+(X-Q),$+($-Z)]}break;case"A":case"a":var at="a"===e.key;if(e.data.length>=7){var nt=+e.data[0],it=+e.data[1],st=+e.data[2],rt=+e.data[3],ot=+e.data[4],ht=+e.data[5],lt=+e.data[6];if(at&&(ht+=t.x,lt+=t.y),ht===t.x&&lt===t.y)break;if(0===nt||0===it)i=i.concat(U(t.x,t.y,ht,lt,n)),t.setPosition(ht,lt);else for(var ct=0;ct<1;ct++)for(var ut=new r([t.x,t.y],[ht,lt],[nt,it],st,!!rt,!!ot),ft=ut.getNextSegment();ft;){var pt=H(ft.cp1[0],ft.cp1[1],ft.cp2[0],ft.cp2[1],ft.to[0],ft.to[1],t,n);i=i.concat(pt),ft=ut.getNextSegment()}}break}return i}var Z=function(t){function e(){return Object(l["a"])(this,e),Object(A["a"])(this,Object(E["a"])(e).apply(this,arguments))}return Object(C["a"])(e,t),Object(c["a"])(e,[{key:"line",value:function(t,e,a,n,i){var s=this._options(i);return this._drawable("line",[j(t,e,a,n,s)],s)}},{key:"rectangle",value:function(t,e,a,n,i){var s=this._options(i),r=[];if(s.fill){var o=[[t,e],[t+a,e],[t+a,e+n],[t,e+n]];"solid"===s.fillStyle?r.push(W(o,s)):r.push(R(o,s))}return r.push(I(t,e,a,n,s)),this._drawable("rectangle",r,s)}},{key:"ellipse",value:function(t,e,a,n,i){var s=this._options(i),r=[];if(s.fill)if("solid"===s.fillStyle){var o=D(t,e,a,n,s);o.type="fillPath",r.push(o)}else r.push(function(t,e,a,n,i){return O(i,S).fillEllipse(t,e,a,n,i)}(t,e,a,n,s));return r.push(D(t,e,a,n,s)),this._drawable("ellipse",r,s)}},{key:"circle",value:function(t,e,a,n){var i=this.ellipse(t,e,a,a,n);return i.shape="circle",i}},{key:"linearPath",value:function(t,e){var a=this._options(e);return this._drawable("linearPath",[T(t,!1,a)],a)}},{key:"arc",value:function(t,e,a,n,i,s){var r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7?arguments[7]:void 0,h=this._options(o),l=[];if(r&&h.fill)if("solid"===h.fillStyle){var c=N(t,e,a,n,i,s,!0,!1,h);c.type="fillPath",l.push(c)}else l.push(function(t,e,a,n,i,s,r){var o=O(r,S).fillArc(t,e,a,n,i,s,r);if(o)return o;var h=t,l=e,c=Math.abs(a/2),u=Math.abs(n/2);c+=G(.01*c,r),u+=G(.01*u,r);for(var f=i,p=s;f<0;)f+=2*Math.PI,p+=2*Math.PI;p-f>2*Math.PI&&(f=0,p=2*Math.PI);for(var d=(p-f)/r.curveStepCount,v=[],g=f;g<=p;g+=d)v.push([h+c*Math.cos(g),l+u*Math.sin(g)]);return v.push([h+c*Math.cos(p),l+u*Math.sin(p)]),v.push([h,l]),R(v,r)}(t,e,a,n,i,s,h));return l.push(N(t,e,a,n,i,s,r,!0,h)),this._drawable("arc",l,h)}},{key:"curve",value:function(t,e){var a=this._options(e);return this._drawable("curve",[z(t,a)],a)}},{key:"polygon",value:function(t,e){var a=this._options(e),n=[];if(a.fill)if("solid"===a.fillStyle)n.push(W(t,a));else{var i=this.computePolygonSize(t),s=R([[0,0],[i[0],0],[i[0],i[1]],[0,i[1]]],a);s.type="path2Dpattern",s.size=i,s.path=this.polygonPath(t),n.push(s)}return n.push(T(t,!0,a)),this._drawable("polygon",n,a)}},{key:"path",value:function(t,e){var a=this._options(e),n=[];if(!t)return this._drawable("path",n,a);if(a.fill)if("solid"===a.fillStyle){var i={type:"path2Dfill",path:t,ops:[]};n.push(i)}else{var r=this.computePathSize(t),h=R([[0,0],[r[0],0],[r[0],r[1]],[0,r[1]]],a);h.type="path2Dpattern",h.size=r,h.path=t,n.push(h)}return n.push(function(t,e){t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");var a=new s(t);if(e.simplification){var n=new o(a.linearPoints,a.closed).fit(e.simplification);a=new s(n)}for(var i=[],r=a.segments||[],h=0;h<r.length;h++){var l=Q(a,r[h],h>0?r[h-1]:null,e);l&&l.length&&(i=i.concat(l))}return{type:"path",ops:i}}(t,a)),this._drawable("path",n,a)}}]),e}(e),J="undefined"!=typeof document,Y=function(){function t(e){Object(l["a"])(this,t),this.canvas=e,this.ctx=this.canvas.getContext("2d")}return Object(c["a"])(t,[{key:"draw",value:function(t){var e=t.sets||[],a=t.options||this.getDefaultOptions(),n=this.ctx,i=!0,s=!1,r=void 0;try{for(var o,h=e[Symbol.iterator]();!(i=(o=h.next()).done);i=!0){var l=o.value;switch(l.type){case"path":n.save(),n.strokeStyle=a.stroke,n.lineWidth=a.strokeWidth,this._drawToContext(n,l),n.restore();break;case"fillPath":n.save(),n.fillStyle=a.fill||"",this._drawToContext(n,l),n.restore();break;case"fillSketch":this.fillSketch(n,l,a);break;case"path2Dfill":this.ctx.save(),this.ctx.fillStyle=a.fill||"";var c=new Path2D(l.path);this.ctx.fill(c),this.ctx.restore();break;case"path2Dpattern":var u=this.canvas.ownerDocument||J&&document;if(u){var f=l.size,p=u.createElement("canvas"),d=p.getContext("2d"),v=this.computeBBox(l.path);v&&(v.width||v.height)?(p.width=this.canvas.width,p.height=this.canvas.height,d.translate(v.x||0,v.y||0)):(p.width=f[0],p.height=f[1]),this.fillSketch(d,l,a),this.ctx.save(),this.ctx.fillStyle=this.ctx.createPattern(p,"repeat");var g=new Path2D(l.path);this.ctx.fill(g),this.ctx.restore()}else console.error("Cannot render path2Dpattern. No defs/document defined.");break}}}catch(y){s=!0,r=y}finally{try{i||null==h.return||h.return()}finally{if(s)throw r}}}},{key:"computeBBox",value:function(t){if(J)try{var e="http://www.w3.org/2000/svg",a=document.createElementNS(e,"svg");a.setAttribute("width","0"),a.setAttribute("height","0");var n=self.document.createElementNS(e,"path");n.setAttribute("d",t),a.appendChild(n),document.body.appendChild(a);var i=n.getBBox();return document.body.removeChild(a),i}catch(t){}return null}},{key:"fillSketch",value:function(t,e,a){var n=a.fillWeight;n<0&&(n=a.strokeWidth/2),t.save(),t.strokeStyle=a.fill||"",t.lineWidth=n,this._drawToContext(t,e),t.restore()}},{key:"_drawToContext",value:function(t,e){t.beginPath();var a=!0,n=!1,i=void 0;try{for(var s,r=e.ops[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var o=s.value,h=o.data;switch(o.op){case"move":t.moveTo(h[0],h[1]);break;case"bcurveTo":t.bezierCurveTo(h[0],h[1],h[2],h[3],h[4],h[5]);break;case"qcurveTo":t.quadraticCurveTo(h[0],h[1],h[2],h[3]);break;case"lineTo":t.lineTo(h[0],h[1])}}}catch(l){n=!0,i=l}finally{try{a||null==r.return||r.return()}finally{if(n)throw i}}"fillPath"===e.type?t.fill():t.stroke()}}]),t}(),K=function(t){function e(t,a){var n;return Object(l["a"])(this,e),n=Object(A["a"])(this,Object(E["a"])(e).call(this,t)),n.gen=new Z(a||null,n.canvas),n}return Object(C["a"])(e,t),Object(c["a"])(e,[{key:"getDefaultOptions",value:function(){return this.gen.defaultOptions}},{key:"line",value:function(t,e,a,n,i){var s=this.gen.line(t,e,a,n,i);return this.draw(s),s}},{key:"rectangle",value:function(t,e,a,n,i){var s=this.gen.rectangle(t,e,a,n,i);return this.draw(s),s}},{key:"ellipse",value:function(t,e,a,n,i){var s=this.gen.ellipse(t,e,a,n,i);return this.draw(s),s}},{key:"circle",value:function(t,e,a,n){var i=this.gen.circle(t,e,a,n);return this.draw(i),i}},{key:"linearPath",value:function(t,e){var a=this.gen.linearPath(t,e);return this.draw(a),a}},{key:"polygon",value:function(t,e){var a=this.gen.polygon(t,e);return this.draw(a),a}},{key:"arc",value:function(t,e,a,n,i,s){var r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7?arguments[7]:void 0,h=this.gen.arc(t,e,a,n,i,s,r,o);return this.draw(h),h}},{key:"curve",value:function(t,e){var a=this.gen.curve(t,e);return this.draw(a),a}},{key:"path",value:function(t,e){var a=this.gen.path(t,e);return this.draw(a),a}},{key:"generator",get:function(){return this.gen}}]),e}(Y),tt="undefined"!=typeof document,et=function(){function t(e){Object(l["a"])(this,t),this.svg=e}return Object(c["a"])(t,[{key:"draw",value:function(t){var e=t.sets||[],a=t.options||this.getDefaultOptions(),n=this.svg.ownerDocument||window.document,i=n.createElementNS("http://www.w3.org/2000/svg","g"),s=!0,r=!1,o=void 0;try{for(var h,l=e[Symbol.iterator]();!(s=(h=l.next()).done);s=!0){var c=h.value,u=null;switch(c.type){case"path":(u=n.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",this.opsToPath(c)),u.style.stroke=a.stroke,u.style.strokeWidth=a.strokeWidth+"",u.style.fill="none";break;case"fillPath":(u=n.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",this.opsToPath(c)),u.style.stroke="none",u.style.strokeWidth="0",u.style.fill=a.fill||null;break;case"fillSketch":u=this.fillSketch(n,c,a);break;case"path2Dfill":(u=n.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",c.path||""),u.style.stroke="none",u.style.strokeWidth="0",u.style.fill=a.fill||null;break;case"path2Dpattern":if(this.defs){var f=c.size,p=n.createElementNS("http://www.w3.org/2000/svg","pattern"),d="rough-".concat(Math.floor(Math.random()*(Number.MAX_SAFE_INTEGER||999999)));p.setAttribute("id",d),p.setAttribute("x","0"),p.setAttribute("y","0"),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("height","1"),p.setAttribute("viewBox","0 0 ".concat(Math.round(f[0])," ").concat(Math.round(f[1]))),p.setAttribute("patternUnits","objectBoundingBox");var v=this.fillSketch(n,c,a);p.appendChild(v),this.defs.appendChild(p),(u=n.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",c.path||""),u.style.stroke="none",u.style.strokeWidth="0",u.style.fill="url(#".concat(d,")")}else console.error("Cannot render path2Dpattern. No defs/document defined.")}u&&i.appendChild(u)}}catch(g){r=!0,o=g}finally{try{s||null==l.return||l.return()}finally{if(r)throw o}}return i}},{key:"fillSketch",value:function(t,e,a){var n=a.fillWeight;n<0&&(n=a.strokeWidth/2);var i=t.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",this.opsToPath(e)),i.style.stroke=a.fill||null,i.style.strokeWidth=n+"",i.style.fill="none",i}},{key:"defs",get:function(){var t=this.svg.ownerDocument||tt&&document;if(t&&!this._defs){var e=t.createElementNS("http://www.w3.org/2000/svg","defs");this.svg.firstChild?this.svg.insertBefore(e,this.svg.firstChild):this.svg.appendChild(e),this._defs=e}return this._defs||null}}]),t}(),at=function(t){function e(t,a){var n;return Object(l["a"])(this,e),n=Object(A["a"])(this,Object(E["a"])(e).call(this,t)),n.gen=new Z(a||null,n.svg),n}return Object(C["a"])(e,t),Object(c["a"])(e,[{key:"getDefaultOptions",value:function(){return this.gen.defaultOptions}},{key:"opsToPath",value:function(t){return this.gen.opsToPath(t)}},{key:"line",value:function(t,e,a,n,i){var s=this.gen.line(t,e,a,n,i);return this.draw(s)}},{key:"rectangle",value:function(t,e,a,n,i){var s=this.gen.rectangle(t,e,a,n,i);return this.draw(s)}},{key:"ellipse",value:function(t,e,a,n,i){var s=this.gen.ellipse(t,e,a,n,i);return this.draw(s)}},{key:"circle",value:function(t,e,a,n){var i=this.gen.circle(t,e,a,n);return this.draw(i)}},{key:"linearPath",value:function(t,e){var a=this.gen.linearPath(t,e);return this.draw(a)}},{key:"polygon",value:function(t,e){var a=this.gen.polygon(t,e);return this.draw(a)}},{key:"arc",value:function(t,e,a,n,i,s){var r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7?arguments[7]:void 0,h=this.gen.arc(t,e,a,n,i,s,r,o);return this.draw(h)}},{key:"curve",value:function(t,e){var a=this.gen.curve(t,e);return this.draw(a)}},{key:"path",value:function(t,e){var a=this.gen.path(t,e);return this.draw(a)}},{key:"generator",get:function(){return this.gen}}]),e}(et);return{canvas:function(t,e){return new K(t,e)},svg:function(t,e){return new at(t,e)},generator:function(t,e){return new Z(t,e)}}}(),I=T;function z(){v=document.querySelector("audio"),v.crossOrigin="anonymous",g=new AudioContext,y=g.createAnalyser(),b=g.createMediaElementSource(v),b.connect(y),y.connect(g.destination),y.fftSize=32,m=y.frequencyBinCount,k=new Uint8Array(m);var t=document.getElementById("canvas");t.height=500,t.width=500,x=t.getContext("2d"),x.translate(100,200),_=I.canvas(document.getElementById("canvas")),_.rectangle(5,5,300,200,{strokeWidth:5}),_.rectangle(150,30,130,80),_.rectangle(30,207,20,10,{strokeWidth:10}),_.rectangle(230,207,20,10,{strokeWidth:10}),_.circle(70,100,100,{fill:"black",fillStyle:"cross-hatch"})}function D(){x.clearRect(150,30,130,80);for(var t=130/m,e=0;e<m;e++){var a=150+e*t,n=k[e]/255*80/2,i=110-n;_.rectangle(a,i,t,n,{fill:"green"})}}function N(){M=requestAnimationFrame(N),y.getByteFrequencyData(k),D()}function W(){return g}function R(){return M}var q={initAudio:z,rockMusic:N,getAudioCtx:W,getFrameID:R},G={name:"HandDrawPlayer",data:function(){return{currentTime:"",duration:"",resume:!1}},props:{song:Object},methods:{onPlay:function(){this.currentTime=parseInt(this.$refs.audio.currentTime)},loadInfo:function(){this.duration=parseInt(this.$refs.audio.duration),this.resume&&this.$refs.audio.play()},startPlay:function(){var t=this;this.resume?(this.$refs.audio.pause(),cancelAnimationFrame(q.getFrameID()),this.resume=!1):q.getAudioCtx().resume().then(function(){t.$refs.audio.play(),q.rockMusic(),t.resume=!0})},autoChange:function(){console.log("over"),this.$emit("song-ended")}},mounted:function(){q.initAudio()}},U=G,B=(a("e1ec"),a("2877")),F=Object(B["a"])(U,S,j,!1,null,"8b045410",null),V=F.exports,X={name:"music",components:{HandDrawPlayer:V},data:function(){return{songList:[{songUrl:"/イノトモ - キンモクセイ.mp3",songImage:"http://jibaofiles.s3.amazonaws.com/public/f7b7f324-01a4-4890-9479-88940e201cd1/9739f3df-7951-443d-b839-0ffadef781e6.jpg",name:"キンモクセイ"}],currentSong:{songUrl:"/イノトモ - キンモクセイ.mp3",songImage:"http://jibaofiles.s3.amazonaws.com/public/f7b7f324-01a4-4890-9479-88940e201cd1/9739f3df-7951-443d-b839-0ffadef781e6.jpg",name:"キンモクセイ"},musicFile:{},songImage:"",loading:!1,error:"",message:"",showList:!1,myMv:""}},methods:{autoChange:function(){var t=this;console.log("recieve success");var e=this.songList.findIndex(function(e){return e.name==t.currentSong.name}),a=Math.floor(Math.random()*(this.songList.length+1));while(e==a)a=Math.floor(Math.random()*this.songList.length);this.currentSong=this.songList[a]},getSong:function(){var t=this;return this.loading=!0,O.getMusic().then(function(e){t.songList=e,t.loading=!1,t.currentSong=t.songList[0]}).catch(function(e){t.error=error,t.loading=!1})},selectSong:function(){this.songFile=this.$refs.ulDom.files[0]},delSong:function(t){var e=this;return this.loading=!0,O.delMusic(t).then(function(){e.message="删除成功!",e.getSong()})},uploadSong:function(){var t=this,e=new FormData;e.append("musicFile",this.songFile),e.append("songImage",this.songImage),this.loading=!1,O.uploadMusic(e).then(function(e){t.message=e.data,t.loading=!1,t.songImage="",t.songFile="",t.getSong()})}},watch:{currentSong:function(){this.$emit("postImg",this.currentSong.songImage)}},created:function(){this.getSong()},mounted:function(){}},$=X,H=(a("01d1"),Object(B["a"])($,r,o,!1,null,null,null)),Q=H.exports,Z={name:"app",data:function(){return{imgUrl:""}},components:{music:Q},methods:{changeImage:function(t){this.imgUrl=t}}},J=Z,Y=(a("034f"),Object(B["a"])(J,i,s,!1,null,null,null)),K=Y.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(K)}}).$mount("#app")},"64a9":function(t,e,a){},e1ec:function(t,e,a){"use strict";var n=a("025f"),i=a.n(n);i.a},ee5c:function(t,e,a){}});
//# sourceMappingURL=app.6e47e94e.js.map